<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Referansearkitektur for datautveksling :: Nasjonalt arkitekturverksted (ny versjon under etablering des. 2020)</title>
    <link rel="canonical" href="https://digdir.gitlab.io/site/architecture-repository/data-exchange-ra/book-data-exchange-ra.html">
    <meta name="generator" content="Antora 2.3.3">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://digdir.gitlab.io/site">Nasjonalt arkitekturverksted (ny versjon under etablering des. 2020)</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Valg</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Rolle</a>
            <a class="navbar-item" href="#">Preferanser</a>
            <a class="navbar-item" href="#">Språk</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Ressurser</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Verktøy</a>
            <a class="navbar-item" href="#">Kunnskapsbibliotek</a>
          </div>
        </div>	
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Hjelp</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Om NEAR-NO</a>
            <a class="navbar-item" href="#">FAQ</a>
          </div>
        </div>
		<a id="twitter-link" class="navbar-item" href="https://twitter.com/janakaSteph" target="_blank">
          <i class="fab fa-twitter"></i>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="architecture-repository" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Nasjonalt arkitekturverksted</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Om Nasjonalt arkitekturverksted</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Praktiske tips om bruk av arkitekturverkstedet</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reading-guide/module-reading-guide.html">Leseveiledning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Praktiske tips om bruk av git-verktøy</span>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../antora/module-antora.html">Praktiske tips om innholdsproduksjon og publisering med Antora og Asciidoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../archi/module-archi.html">Praktiske tips om arkitekturmodellering og samarbeid i Archi</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../archi/module-archi.html">Praktiske tips om utveksling av arkitekturmodeller</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Hvordan gi kommentarer og få svar på spørsmål</span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../about-topic-areas/about-topic-areas.html">Temaområder</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about-topic-areas/about-topic-areas.html">Om temaområder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../data-sharing/data-sharing.html">Datadeling</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../data-sharing/data-sharing.html">Om temaområdet <em>datadeling</em></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../data-sharing/data-sharing-value-streams.html">Referansemodeller for datadeling</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../about-data-exchange/about-data-exchange.html">Datautveksling</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../about-data-exchange/about-data-exchange.html">Om temaområdet <em>datautveksling</em></a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="book-data-exchange-ra.html">Referansearkitektur for datautveksling</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#architecture-repository:about-data-exchange-ra:about-data-exchange-ra.adoc">Om referansearkitektur for datautveksling</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../data-for-data-exchange/data-for-data-exchange.html">Begrepsapparat for data (datautveksling)</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../data-exchange-roles/data-exchange-roles.html">Roller involvert i datautveksling</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../about-data-exchange-patterns/about-data-exchange-patterns.html">Arkitekturmønstre for datautveksling</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../about-data-exchange-patterns/about-data-exchange-patterns.html">Om arkitekturmønstre for datautveksling</a>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Basismønstre for datautveksling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../book-messaging/book-messaging.html">Forsendelse (eMelding)</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../book-request-reply/book-request-reply.html">Forespørsel-svar (eOppslag)</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../book-publish-subscribe/book-publish-subscribe.html">Publisering-konsumering (eNotifikasjon)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Løsningsbyggeklosser for bruk og gjenbruk</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Fellesløsninger</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Tekniske tjenester og API-er</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Sluttbrukertjenester</span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Styring og organisering</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Initiativer</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../proposed-reference-architectures/proposed-reference-architecture-work.html">Innspill til prioritering av videre arbeid med referansearkitekturer</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../proposed-reference-architectures/følgebrev.html">Følgebrev</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../proposed-reference-architectures/situasjonsrapport.html">Situasjonsrapport</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../proposed-reference-architectures/strukturering-av-spørreskjema.html">Strukturering av spørreskjema</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../proposed-reference-architectures/forklaringer-til-spørsmålene.html">Forklaringer til spørsmålene</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../methods/methods.html">Metodikk for utvikling av nasjonal arkitektur</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../methods/reference-architecture-methods.html">Metodikk for utvikling av referansearkitekturer</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Se også</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../drafts/index.html">Utkast og innspill</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../knowledge/index.html">Arkitekturfaglig kunnskapsverksted</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Nasjonalt arkitekturverksted</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Arkitekturfaglig kunnskapsverksted</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../knowledge/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Nasjonalt arkitekturverksted</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Utkast og innspill</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../drafts/index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Nasjonalt arkitekturverksted</a></li>
    <li><a href="../about-topic-areas/about-topic-areas.html">Temaområder</a></li>
    <li><a href="../about-data-exchange/about-data-exchange.html">Datautveksling</a></li>
    <li><a href="book-data-exchange-ra.html">Referansearkitektur for datautveksling</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://gitlab.com/digdir/components/architecture-repository/edit/master/docs/architecture-landscape/topic-areas/data-exchange/modules/data-exchange-ra/pages/book-data-exchange-ra.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Referansearkitektur for datautveksling</h1>
<div class="sect1">
<h2 id="_om_referansearkitektur_for_datautveksling"><a class="anchor" href="#_om_referansearkitektur_for_datautveksling"></a><a class="link" href="#_om_referansearkitektur_for_datautveksling">1. Om referansearkitektur for datautveksling</a></h2>
<div class="sectionbody">
<div class="paragraph lead">
<p><strong>Referansearkitektur for datautveksling dokumenterer alternative mønstre og god praksis for utvikling, drift og forvaltning av løsninger for datautveksling. Det skilles mellom  konseptuelle beskrivelser og anvendelser med spesifikke løsningskomponenter.</strong></p>
</div>
<div class="paragraph">
<p>Datautveksling kan brytes ned i et sett av avgrensede områder og kapabiliteter. På øverste nivå skilles det mellom:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deling av data på forespørsel: Innhenting av data ved forespørsel til en eller flere datakilder.</p>
</li>
<li>
<p>Deling av data ved forsendelse: Forsendelse av data fra en avsender til en eller flere mottakere.</p>
</li>
<li>
<p>Deling av data ved publisering: Publisering av data eller hendelsesdata (notifikasjoner, med løs kopling mellom datatilbyder og datakonsument.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dette er illustrert i følgende figur.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Områder%20innen%20datautveksling.png" alt="Områder innen datautveksling image">
</div>
<div class="title">Figur 1. Områder innen datautveksling som dekkes av referansearkitekturen</div>
</div>
<div class="paragraph">
<p>Det skille videre mellom operative og forvaltningsmessige kapabiliteter, dvs. selve datautvekslingen og det som går på tilrettelegging og vedlikehold.</p>
</div>
<div class="paragraph">
<p>Følgende figur viser en oversikt over de viktigste temaene og kapabilitetene inndelt i operativt og forvaltningsmessig og om de tilhører datatilbyder eller datakonsument. Nederst i figuren er også listet opp tverrgeånde temaer som vurderes som viktige inn i datautveksling og må ivaretas på tvers av roller og kapabiliteter.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Datautveksling%20-%20overordnet%20oversikt%20over%20kapabiliteter%20og%20temaer%20.png" alt="Datautveksling - overordnet oversikt over kapabiliteter og temaer  image">
</div>
<div class="title">Figur 2. Datautveksling - overordnet oversikt over kapabiliteter og temaer</div>
</div>
<div class="paragraph">
<p>De tverrgående temaene beskriver områder som må ivaretas for å utveksle data i tråd med regelverk og god praksis. Dette er ikke en uttømmende liste, men angir det som anses som viktigst å beskrive.</p>
</div>
<div class="paragraph">
<p>Noen av disse temaene er også aktuelle i andre sammenhenger enn datautveksling, og vil beskrives under andre overskrifter.</p>
</div>
<div class="paragraph">
<p>Kort introduksjon ev hvert enkelt av disse temaene gis her.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Standarder og spesifikasjoner</strong></p>
<div class="paragraph">
<p>Standarder og spesifikasjoner (og andre føringer) kan finnes på alle lagene i <em>EIF-modellen</em> (juridisk, organisatorisk, semantisk, teknisk). Dokumentasjon av slike føringer kan gjøres for større eller mindre områder. I gjeldende <a href="nab_referanse_maler_asciidoc-book-sat">mal for referansearkitekturene</a> omtales dette som  <em>interoperability specifications</em>.</p>
</div>
</li>
<li>
<p><strong>Avtaleforvaltning</strong></p>
<div class="paragraph">
<p>Dette temaområdet omhandler oppsett og forvaltning av avtaler melom partene, enten bilateralt eller innen et felleskap (community).</p>
</div>
</li>
<li>
<p><strong>Roller</strong>
Dette temaområdet definerer <a href="#:architecture-repository:data-exchange-roles:page$data-exchange-roles.adoc" class="page unresolved">roller involvert i datautveksling</a>.</p>
</li>
<li>
<p><strong>Informasjonssikkerhet, tillit og personvern</strong>
Dette temaområdet er omfattende. Det omhandler temaer som:</p>
<div class="ulist">
<ul>
<li>
<p>Integritet, konfidensialitet, tilgjengelighet</p>
</li>
<li>
<p>Tillitskjeder</p>
</li>
<li>
<p>Innsyn og transparens</p>
</li>
<li>
<p>Personvern</p>
</li>
<li>
<p>M.v</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Feilhåndtering ved datautveksling</strong>
Temaområdet <em>feilhåndtering ved datautveksling</em> omhandler hvordan feil og avvik håndteres. I tillegg til generelle prinsipper og krav,  dokumenteres særskilte aspekter i tilknytning til de ulike arkitekturmønstrene.</p>
</li>
<li>
<p><strong>Sporing</strong></p>
<div class="paragraph">
<p>Temaområdet <em>sporing</em> omfatter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sporing av dataaksess (stikkord: <em>informasjonssikkerhet og tillit</em>)</p>
</li>
<li>
<p>Sporing av datakilder (stikkord: <em>masterdata management</em>)</p>
</li>
<li>
<p>Dokumentasjon av etterlevelse av lover og regler, samt andre føringer (f.eks. obligatoriske arkitekturprinsipper)</p>
</li>
<li>
<p>Dokumentasjon tilknyttet vedtak (stikkord: <em>innebygget arkiv</em>)</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_begrepsapparat_for_data_datautveksling"><a class="anchor" href="#_begrepsapparat_for_data_datautveksling"></a><a class="link" href="#_begrepsapparat_for_data_datautveksling">2. Begrepsapparat for data (datautveksling)</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Det finnes ulike definisjoner av data i forhold til informasjon.</p>
</div>
<div class="paragraph">
<p><span class="underline">I tilknytning til <em>datautveksling</em></span> er ikke alle distinksjonene nødvendigvis relevante. Så langt det gir mening,   benyttes begrepet <em>data</em> heller enn <em>informasjon</em>.</p>
</div>
<div class="paragraph">
<p>Figuren nedenfor introduserer noen  begreper som anses som nyttige og nødvendige i tilknytning til datautveksling.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Hva%20er%20data%20for%20datautveksling.png" alt="Hva er data for datautveksling image">
</div>
<div class="title">Figur 3. Hva er data for datautveksling</div>
</div>
<div class="paragraph">
<p>At det gjøres en forskjell på <em>Forretningsobjekt</em> og <em>Dataobjekt</em> følger av aktuelle modelleringsstandarder, men kan ses som mindre viktig her. Spesielt interesserte kan finne mer om temaet under <a href="../nab_referanse_modelleringskonvensjoner">Modelleringskonvensjoner</a>.</p>
</div>
<div class="paragraph">
<p>Data kan samles i <em>datasett</em>, som beskrives i form av metadata og datamodeller.</p>
</div>
<div class="paragraph">
<p>Data og datasett er å oppfatte som "logiske" definisjoner, uten binding til  representasjon, teknisk løsning eller fysiske forekomster.</p>
</div>
<div class="paragraph">
<p>Innholdet i datasett ("selve dataene") kan redegjøres for i form av tidsstemplede <em>øyeblikksbilder</em> eller ved  <em>endringslogger</em> ut fra gitte øyeblikksbilder.</p>
</div>
<div class="paragraph">
<p>Begrepet <em>datadistrubusjon</em> tilsvarer begrepet <a href="https://www.w3.org/TR/vocab-dcat/#Class:_Distribution"><em>distribution</em></a> i DCAT-standarden. Dette kan f.eks. være dokumenter i et dokumentarkiv eller tabeller i en database.</p>
</div>
<div class="paragraph">
<p>Det er den fysiske forekomsten av data i ulike systemer som må sikres, enten det dreier seg om data som er lagret over tid (data at rest) eller data som finnes midlertidig mellom systemer i en datautveksling (data in motion).</p>
</div>
<div class="paragraph">
<p>Det skilles videre mellom autoritative datasett (masterdata) og avledete data (slavedata).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Info"></i>
</td>
<td class="content">
Det er vanlig å skille mellom mellom data, informasjon og kunnskap. Det gir f.eks. mening å si <em>informasjonssikkerhet</em>, mens en snakker om <em>sikring av data</em> for å oppnå <em>informasjonssikkerhet</em>. En skiller også gjerne mellom konseptuelle, logiske og fysiske data.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Info"></i>
</td>
<td class="content">
Data kan finnes med større eller mindre grad av struktur, og det er en flytende overgang mellom ustrukturerte, semistrukturerte og strukturerte data. Med nyere teknologier innen maskinlæring kan en også tolke og gi struktur og mening til data som en tidligere har definert som ustrukturerte.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Info"></i>
</td>
<td class="content">
Det finnes ulik praksis for bruk av begrepet <em>dokument</em>. Dette begrepet brukes ikke i sammenheng med referansearkitekturer for datautveksling.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_roller_involvert_i_datautveksling"><a class="anchor" href="#_roller_involvert_i_datautveksling"></a><a class="link" href="#_roller_involvert_i_datautveksling">3. Roller involvert i datautveksling</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_samhandlingsaktører"><a class="anchor" href="#_samhandlingsaktører"></a><a class="link" href="#_samhandlingsaktører">3.1. Samhandlingsaktører</a></h3>
<div class="imageblock">
<div class="content">
<img src="../data-exchange-roles/_images/Samhandlingsaktører.png" alt="Samhandlingsaktører image">
</div>
<div class="title">Figur 4. Samhandlingsaktører</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 1. Elementer i view for Roller involvert i datautveksling</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatilbyder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyder av data til andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datakonsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som innhenter eller mottar data fra andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataformidler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">En aktør som formidler data mellom tilbyder og konsument. F.eks. tilbyder av meldingsinfrastruktur, aksesspunkt, mellomliggende lagringsløsninger etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataprodusent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som oppdaterer et datasett. Enten ved å gjøre endringer eller legge til nye data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samhandlingsaktør</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samlebetegnelse på roller som inngår i en samhandlingsprosess og samhandler med en annen samhandlingsaktør. Kan være en tilbyder, konsument, avsender, mottaker, leverandør etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avsender</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som sender en elektronisk melding eller tilsvarende.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mottaker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som mottar en elektronisk melding eller tilsvarende.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Databehandler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som behandler personopplysninger på oppdrag fra den behandlingsansvarlige. Dette er vanligvis en virksomhet. Ref. <a href="https://www.datatilsynet.no/rettigheter-og-plikter/virksomhetenes-plikter/databehandleravtale/behandlingsansvarlig-og-databehandler/" class="bare">https://www.datatilsynet.no/rettigheter-og-plikter/virksomhetenes-plikter/databehandleravtale/behandlingsansvarlig-og-databehandler/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Representant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som representerer en samhandlingsaktør enten gjennom hjemmel, fullmakt eller samtykke. Fullmakt omfatter her delegert rettighet gitt til leverandør av ansvarlig samhandlingsaktør.</p>
<p class="tableblock">Representant kan også være f.eks. verge, fullmektig eller annen bemyndiget person.</p>
<p class="tableblock">En annen type representant er databehandler i betydningen representant for behandlingsansvarlig (personvern).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Behandlingsansvarlig</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som bestemmer formålet med behandlingen av personopplysninger og hvilke hjelpemidler som skal brukes. Dette er vanligvis en virksomhet.  Se også <a href="https://www.datatilsynet.no/rettigheter-og-plikter/virksomhetenes-plikter/databehandleravtale/behandlingsansvarlig-og-databehandler/?id=11274" class="bare">https://www.datatilsynet.no/rettigheter-og-plikter/virksomhetenes-plikter/databehandleravtale/behandlingsansvarlig-og-databehandler/?id=11274</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ansvarlig aktør</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som har eller er delegert et ansvar i forbindelse med databehandling.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Koordinator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">En aktør som har en koordinerende rolle i tilrettelegging og gjennomføring av datautveksling.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segmentansvarlig</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som har en koordinerende rolle innen en bransje. F.eks. Finans Norge på vegne av bankene.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leverandør</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som selger eller leverer tjenester, systemer eller lignende.
Tjenesteleverandører vil normalt representere en behandlingsansvarlig og også ha rollen som databehandler.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_tiltrodde_tredjeparter"><a class="anchor" href="#_tiltrodde_tredjeparter"></a><a class="link" href="#_tiltrodde_tredjeparter">3.2. Tiltrodde tredjeparter</a></h3>
<div class="imageblock">
<div class="content">
<img src="../data-exchange-roles/_images/Tiltrodde%20tredjeparter.png" alt="Tiltrodde tredjeparter image">
</div>
<div class="title">Figur 5. Tiltrodde tredjeparter</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 2. Elementer i view for Tiltrodde tredjeparter</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identitetsleverandør</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F.eks. ID-porten.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tiltrodd tredjepart (TTP)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samlebetegnelse på aktører som yter en eller flere sikkerhetstjenester, og som to, for hverandre ukjente, kommuniserende parter har tiltro til. TTP-ens rolle er å øke tiltroen til at meldinger og transaksjoner overføres til den tilsiktede mottaker til rett sted og på en korrekt måte. I tilfelle tvister skal det finnes metoder for å generere bevis.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avtaleforvalter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">En separat avtaleforvalter vedlikeholder samhandlingsspesifikasjoner på vegne av samhandlingsaktørene og oppretter samhandlingsavtaler som et mellomledd mellom aktørene. Dette reduserer det totale antallet samhandlingsavtaler vesentlig, og kan gi større fleksibilitet når det gjelder mulige  samhandlingsparter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sertifikatutsteder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utsteder av SSL-sertifkat eller tilsvarende. Eksempel: Buypass.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_arkitekturmønstre_for_datautveksling"><a class="anchor" href="#_arkitekturmønstre_for_datautveksling"></a><a class="link" href="#_arkitekturmønstre_for_datautveksling">4. Arkitekturmønstre for datautveksling</a></h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>Referansearkitektur for datautveksling inneholder et sett arkitekturmønstre, fordelt på basismønstre og sammensatte mønstre.
Det skilles videre mellom  konseptuelle beskrivelser og anvendelser med spesifikke løsningskomponenter.</p>
</div>
<div class="paragraph">
<p>Aktuelle basismønstre for datautveksling er:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../book-messaging/book-messaging.html" class="page">Forsendelse (eMelding)</a></p>
</li>
<li>
<p><a href="../book-request-reply/book-request-reply.html" class="page">Forespørsel-svar (eOppslag)</a></p>
</li>
<li>
<p><a href="../book-publish-subscribe/book-publish-subscribe.html" class="page">Publisering-konsumering (eNotifikasjon)</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_basismønstre_for_datautveksling"><a class="anchor" href="#_basismønstre_for_datautveksling"></a><a class="link" href="#_basismønstre_for_datautveksling">4.1. Basismønstre for datautveksling</a></h3>
<div class="sect3">
<h4 id="_forsendelse_emelding"><a class="anchor" href="#_forsendelse_emelding"></a><a class="link" href="#_forsendelse_emelding">4.1.1. Forsendelse (eMelding)</a></h4>

</div>
</div>
<div class="sect2">
<h3 id="_generisk_forsendelse"><a class="anchor" href="#_generisk_forsendelse"></a><a class="link" href="#_generisk_forsendelse">4.2. Generisk forsendelse</a></h3>
<div class="paragraph lead">
<p>Det mest grunnleggende mønsteret for meldingsutveksling omhandler enkeltvise meldinger fra en avsender til en kjent mottaker</p>
</div>
<div class="sect3">
<h4 id="_introduksjon"><a class="anchor" href="#_introduksjon"></a><a class="link" href="#_introduksjon">4.2.1. Introduksjon</a></h4>
<div class="paragraph">
<p><em>Generisk mønster for meldingsforsendelse til kjent mottaker</em> beskriver meldingsutveksling i form av enkeltvise meldinger fra en avsender til en kjent mottaker. De konseptuelle beskrivelsene som gis her danner grunnlag for beskrivelser av mer avanserte og spesialiserte mønstre; men kan også stå på egne ben, med egne løsningsmønstre.</p>
</div>
<div class="paragraph">
<p>Beskrivelsene skiller mellom</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Det konseptuelle arkitekturmønsteret</p>
</li>
<li>
<p>Praktisk anvendelser i form av løsningsmønstre med mer konkret veiledning, f.eks. til bruk av nasjonale fellesløsninger.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_brukstilfeller"><a class="anchor" href="#_brukstilfeller"></a><a class="link" href="#_brukstilfeller">4.2.2. Brukstilfeller</a></h4>
<div class="paragraph">
<p>Aktuelle brukstilfeller for <em>Generisk mønster for meldingsforsendelse til kjent mottaker</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>melding om hendelser og data mellom to kjente parter i tverrgående forretningsprosesser, f.eks. saksbehandlingsprosesser.</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p>melding om  hendelser og data til datalagringsløsninger</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_grunnleggende_konsepter_og_forutsetninger"><a class="anchor" href="#_grunnleggende_konsepter_og_forutsetninger"></a><a class="link" href="#_grunnleggende_konsepter_og_forutsetninger">4.2.3. Grunnleggende konsepter og forutsetninger</a></h4>
<div class="sect4">
<h5 id="_logisk_og_fysisk_dataflyt"><a class="anchor" href="#_logisk_og_fysisk_dataflyt"></a><a class="link" href="#_logisk_og_fysisk_dataflyt">4.2.3.1. Logisk og fysisk dataflyt</a></h5>
<div class="paragraph">
<p>Følgende arkitekturtegning illustrerer helt grunnleggende konsepter.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../generic-one-way-push/_images/Generisk%20meldingsforsendelse.png" alt="Generisk meldingsforsendelse image">
</div>
<div class="title">Figur 6. Generisk meldingsforsendelse</div>
</div>
<div class="sect5">
<h6 id="_klargjør_for_deling_av_data_ved_forsendelse_emelding"><a class="anchor" href="#_klargjør_for_deling_av_data_ved_forsendelse_emelding"></a><a class="link" href="#_klargjør_for_deling_av_data_ved_forsendelse_emelding">4.2.3.1.1. Klargjør for deling av data ved forsendelse (eMelding)</a></h6>
<div class="imageblock">
<div class="content">
<img src="../generic-one-way-push/_images/Klargjør%20for%20eMelding%20(løsningsmønster).png" alt="Klargjør for eMelding (løsningsmønster) image">
</div>
<div class="title">Figur 7. Klargjør for eMelding (løsningsmønster)</div>
</div>
<div class="paragraph">
<p>Forklaring til figur:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 3. Elementer i view for Klargjør for forsendelse SBB</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Klargjøre for deling av data ved forsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evne til å klargjøre for meldingsutveksling med eksterne parter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samhandlingsaktør</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samlebetegnelse på roller som inngår i en samhandlingsprosess og samhandler med en annen samhandlingsaktør. Kan være en tilbyder, konsument, avsender, mottaker, leverandør etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Klargjøre for meldingsutveksling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å klargjøre for eMelding ved å akseptere felles avtaler og tilgjengeliggjøre nødvendig informasjon til andre samhandlingsaktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreta innmelding i fellesskap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Akseptere vilkår for og innrette seg etter reglene og forpliktelsene som gjelder i et fellesskap (community) gjennom å f.eks. signere en avtale eller kontrakt. Dette kan omfatte merkantile forhold.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrer kapabiliteter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registering av kapabiliteter vil si å tilgjengeligjøre for avsendere og konsumenter hvilke meldinger og formater man kan motta og hvilke ressurser og tjenester man tilbyr.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrer adresser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Med adresse menes nødvendig informasjon for å få tilgang til tjenester fra tilbyder eller for å sende melding til mottaker av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrer sertifikater</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilgjengeliggjøre for samhandlende parter sertifikater for bruk ved forsendelser. Dette kan være generelle eller domenespesifikke sertifikater. Eventuelt spesifikt for enkelet forretningsområder.</p>
<p class="tableblock">Sertifikater må forvaltes og fornyes etter gjeldende regler for å være gyldige og egnet for bruk.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CEF SML</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Metadata Locator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Certificate Publisher</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sertifikatregisterering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registrere serifikater i felles katalogtjeneste.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adresseregistrering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registrere adresse for å sende melding til mottaker.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kapabilitetsregistrering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registrere kapabiliteter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Elektronisk mottakerregister (ELMA)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Med ELMA får brukerne dine oversikt over alle virksomheter i Norge som kan motta elektroniske fakturaer i henhold til EHF-standarden.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BCL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Certificate Locater</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_operativ_deling_av_data_ved_forsendelse_emelding"><a class="anchor" href="#_operativ_deling_av_data_ved_forsendelse_emelding"></a><a class="link" href="#_operativ_deling_av_data_ved_forsendelse_emelding">4.2.3.1.2. Operativ deling av data ved forsendelse (eMelding)</a></h6>
<div class="sect6">
<h7 id="_send_emelding"><a class="anchor" href="#_send_emelding"></a><a class="link" href="#_send_emelding">4.2.3.1.2.1. Send eMelding</a></h7>
<div class="imageblock">
<div class="content">
<img src="../generic-one-way-push/_images/Send%20eMelding%20%20(løsningsmønster).png" alt="Send eMelding  (løsningsmønster) image">
</div>
<div class="title">Figur 8. Send eMelding  (løsningsmønster)</div>
</div>
<div class="paragraph">
<p>Forklaring til figur:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 4. Elementer i view for Send melding SBB</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avsender</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som sender et brev, en pakke, en e-post, en elektronisk melding, en SMS eller lignende.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å sende en eMelding til en mottaker ved hjelp av fellestjenester.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kontroller mottakers kapabiliteter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å slå opp og kontrollere mottakers evner til samhandling innenfor fellesskapet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eksepeder melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å sende melding til mottaker.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formater melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å tilpasse informasjonspakken til mottakers kapabiliteter og fellesskapets standarder.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Krypter melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess med å sikre forsendelsen. Inkluderer konfidensialitets- og integritetssikring der dette er nødvendig. Normalt gjøres dette ved hjelp av kryptografi og sertifikater.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adresser forsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess med å adressere forsendelsen. Dette kan være til mottaker direkte eller til dennes representant eller aksesspunkt,</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Signer forsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å signere meldingen som sendes til mottaker. Til dette benyttes eget sertifikats private nøkkel.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kapabilitetsoppslag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å slå opp kapabilitetene til en samhandlingspart</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adresseoppslag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å slå opp adressen til en mottaker.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sending av data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å sende data til en mottaker.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sertifikatoppslag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å hente krypteringssertifkat til mottaker.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datautvekslings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for utveksling av data. Samme som data exchange service. Benyttes av avsender og mottaker for transport av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Signeringstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å signere en elektronisk melding. For eMelding er det signatur i form av elektronisk segl som er mest relevant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sporingstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for sporing (audit) av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatransformasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for  transformere data og meldinger til andre formater.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CEF SML</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Metadata Locator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Certificate Publisher</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ELMA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Elektronisk mottakeradresseregister</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BCL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Certificate Locater</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PEPPOL</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="_motta_emelding"><a class="anchor" href="#_motta_emelding"></a><a class="link" href="#_motta_emelding">4.2.3.1.2.2. Motta eMelding</a></h7>
<div class="imageblock">
<div class="content">
<img src="nab_referanse_arkitekturer_emelding/media/Motta%20eMelding%20(løsningsmønster).png" alt="Motta eMelding (løsningsmønster) image">
</div>
<div class="title">Figur 9. Motta eMelding (løsningsmønster)</div>
</div>
<div class="paragraph">
<p>Forklaring til figur:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 5. Elementer i view for Motta melding SBB</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å motta, validere og kvittere for mottatte meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mottaker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som mottar en melding.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å motta melding. Består av flere delprosesser.</p>
<p class="tableblock">Etter mottak må mottaker følge opp og håndtere innholdet i meldingen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valider forsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å kontrollere om innholdet i en forsendelse er i henhold til avtale og avtalte formater.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta forsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å motta en melding fra avsender</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kontroller forsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å kontrollere om forsendelsen er autentisk og fra en legitim avsender.s</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dekrypter melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å dekryptere mottatt melding.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datautvekslings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for utveksling av data. Samme som data exchange service. Benyttes av avsender og mottaker for transport av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sporingstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for sporing (audit) av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Signaturvaliderings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å validere og verifisere elektronsike signaturer. I forbindelse med eMelding er det kontroll av elektronisk segl som er mest relevant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datavaliderings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å validere meldinger mot format og forventet innhold.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PEPPOL</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_4_hjørners_modellen"><a class="anchor" href="#_4_hjørners_modellen"></a><a class="link" href="#_4_hjørners_modellen">4.3. 4-hjørners-modellen</a></h3>
<div class="sect3">
<h4 id="_generelt"><a class="anchor" href="#_generelt"></a><a class="link" href="#_generelt">4.3.1. Generelt</a></h4>
<div class="paragraph">
<p>Begrepet "firehjørnersmodell", eller “4-corner model”, stammer fra  <a href="../kunnskap_referansearkitektur_eu-edelivery">CEF eDelivery</a>.</p>
</div>
<div class="paragraph">
<p>Følgende figur illustrerer aktuelle konsepter:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../4-corner-model/_images/Firehjørnersmodellen%20-%20forvaltningsmessig.png" alt="Firehjørnersmodellen - forvaltningsmessig image">
</div>
<div class="title">Figur 10. Firehjørnersmodellen - forvaltningsmessig</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Info"></i>
</td>
<td class="content">
Denne modellen kan minne om en "tjenestebuss" (ESB), der det også finnes tilsvarende løs kopling mellom avsender og mottaker. Den grunnleggende forskjellen er at dette mønsteret er fullstendig distribuert og skalerer "uendelig"  over www på global basis.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>I firehjørnersmodellen kommuniserer avsenders og mottakers systemer via hver sine <em>aksesspunktløsninger</em>. Aksesspunktene konverterer mellom applikasjonsspesifikke protokoller og en standardisert, sikker meldingsprotokoll over aktuell kommunikasosjonsinfrastruktur.</p>
</div>
<div class="paragraph">
<p>Hvert aksesspunkt blir en node i et tillitsfelleskap.</p>
</div>
<div class="paragraph">
<p>Aksesspunktene kan eventuelt integreres i avsenders og mottakers systemer. Om dette gjøres på begge sider, vil en rent fysisk ha en punkt-til-punkt forbindelse, men uten at det endrer konseptet som sådan.</p>
</div>
<div class="paragraph">
<p>Nærmere om "hjørnene":</p>
</div>
<div class="paragraph">
<p><strong>Hjørne 1</strong> representerer back-end systemet (som ligger innenfor avsenders juridiske ansvar) som sender melding til et annet back-end system (hjørne 4).</p>
</div>
<div class="paragraph">
<p><strong>Hjørne 2</strong> (aksesspunkt for avsender) Samhandler med hjørne 1 og slår opp mottakers adresse og kapabiliteter. Aksesspunktet har evnen til å sende på en sikker og pålitelig måte til et annet aksesspunkt.</p>
</div>
<div class="paragraph">
<p><strong>Hjørne 3</strong> (aksesspunkt for mottaker) Mottakers aksesspunkt har teknisk evne til å motta meldinger på en sikker og pålitelig måte og samhandle med hjørne 4.</p>
</div>
<div class="paragraph">
<p><strong>Hjørne 4</strong> representerer back-end systemet til mottaker.</p>
</div>
</div>
<div class="sect3">
<h4 id="_egenskaper_ved_4_hjørnersmodellen"><a class="anchor" href="#_egenskaper_ved_4_hjørnersmodellen"></a><a class="link" href="#_egenskaper_ved_4_hjørnersmodellen">4.3.2. Egenskaper ved  4-hjørnersmodellen</a></h4>
<div class="ulist">
<ul>
<li>
<p>Løs kopling mellom avsender og mottaker</p>
</li>
<li>
<p>Sikker meldingsinfrastruktur (mellom aksesspunktene)</p>
</li>
<li>
<p>Avtaleforvaltning gjennom betrodd tredjepart</p>
</li>
<li>
<p>Mulighet for å oppdage tjenestetilbydere og inngå avtaler runtime</p>
</li>
<li>
<p>Ubegrenset skalering</p>
</li>
<li>
<p><span class="red">Mulig å opprette flere communities</span></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_backend_integrasjon"><a class="anchor" href="#_backend_integrasjon"></a><a class="link" href="#_backend_integrasjon">4.3.3. Backend-integrasjon</a></h4>
<div class="paragraph">
<p>I 4-hjørnersmodellen er det fleksibilitet gjennom hvordan man velger å integrere aksesspunktet med egen IT-arkitektur og IT-infrastruktur. Sett fra avsenderapplikasjonen er det tre måter å integrere hjørne 1/hjørne 2 og hjørne 3/hjørne 4.</p>
</div>
<div class="sect4">
<h5 id="_tett_kobling"><a class="anchor" href="#_tett_kobling"></a><a class="link" href="#_tett_kobling">4.3.3.1. Tett kobling</a></h5>
<div class="paragraph">
<p>Avsender applikasjon og aksesspunkt er tett koblet ved at avsender applikasjonen har integrert funksjonaliteten til aksesspunktet. Det blir dermed et en-til-en forhold mellom aksesspunkt og avsender applikasjonen.</p>
</div>
</div>
<div class="sect4">
<h5 id="_semi_tett_kobling"><a class="anchor" href="#_semi_tett_kobling"></a><a class="link" href="#_semi_tett_kobling">4.3.3.2. Semi-tett kobling</a></h5>
<div class="paragraph">
<p>Avsender applikasjonen og aksesspunkt er semi-tett koblet ved at back-end og aksesspunkt er løst koblet internt, men del av det samme interne IT-arkitekturen og IT-infrastrukturen. Et aksesspunkt kan håndtere flere avsender applikasjoner.</p>
</div>
</div>
<div class="sect4">
<h5 id="_løs_kobling"><a class="anchor" href="#_løs_kobling"></a><a class="link" href="#_løs_kobling">4.3.3.3. Løs kobling</a></h5>
<div class="paragraph">
<p>Avsender applikasjonen og aksesspunkt er løst koblet og ikke en del av samme interne IT-arkitektur og IT-infrastruktur. Ett aksesspunkt kan håndtere meldingsutveksling for mange avsender applikasjoner fra flere virksomheter.</p>
</div>
<div class="paragraph">
<p>Ved løs kobling er det spesielle hensyn ved ende til ende kryptering og integritet. Det er hjørne 1 som må pakke og kryptere informasjonen og kun hjørne 4 som kan dekryptere. Hjørne 2 og hjørne 3 har ikke lov til å pakke om, fjerne eller legge til noe til meldingen og fungerer kun som en ruting mekanisme.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_emelding"><a class="anchor" href="#_emelding"></a><a class="link" href="#_emelding">4.4. eMelding</a></h3>
<div class="paragraph lead">
<p>eMelding er en referansearkitektur for meldingsutveksling på tvers av virksomheter, sektorer og landegrenser.</p>
</div>
<div class="sect3">
<h4 id="_introduksjon_2"><a class="anchor" href="#_introduksjon_2"></a><a class="link" href="#_introduksjon_2">4.4.1. Introduksjon</a></h4>
<div class="paragraph">
<p>Begrepet eMelding kan ses som en skriver seg fra strategisk arbeid med</p>
</div>
<div class="paragraph">
<p>Videre informasjon og og dokumentasjon om eMelding finnes under <a href="https://www.difi.no/fagomrader-og-tjenester/digitalisering-og-samordning/nasjonal-arkitektur-old/referansearkitektur-meldingsutveksling-emelding" class="bare">https://www.difi.no/fagomrader-og-tjenester/digitalisering-og-samordning/nasjonal-arkitektur-old/referansearkitektur-meldingsutveksling-emelding</a>.</p>
</div>
<div class="paragraph">
<p>eMelding  kan ses på som en "beste praksis" for meldingsutveksling på tvers av virksomheter og sektorer i offentlig sektor, samt mellom offentlig sektor og privat sektor.</p>
</div>
<div class="paragraph">
<p>eMelding tar utgangspunkt i den europeiske "byggeklossen"  <a href="../kunnskap_referansearkitektur_eu-edelivery">CEF eDelivery</a>. CEF eDelivery  spesifiserer arkitekturer og standarder for meldingsutveksling. Det finnes flere eksisterende anvendelser og gjenbrukbare løsninger for å realisere eDelivery i ulike land og virksomheter.</p>
</div>
<div class="paragraph">
<p>eMelding anvendes bl.a. innen <a href="../kunnskap_losning_eu-peppol">PEPPOL-nettverket</a>, nærmere bestemt i regi av OpenPEPPOL.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Info"></i>
</td>
<td class="content">
<em>OpenPEPPOL is a non-profit international association under Belgian law (Association Internationale Sans But Lucratif – AISBL) and consists of both public sector and private members. The association has assumed full responsibility for the development and maintenance of the PEPPOL specifications, building blocks and its services and implementation across Europe.</em>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>eMelding som referansearkitektur rendyrker konseptene og har en klar kopling til CEF eDelivery, men beskrives i utgangspunktet frikoplet fra CEF eDelivery</strong>. Med dette som utgangspunkt, angis så aktuelle løsninger og praktiske anvendelser i form av CEF eDelivery og PEPPOL/OpenPEPPOL.</p>
</div>
<div class="paragraph">
<p>eMelding som referansearkitektur er avgrenset til<strong> asynkron meldingsutveksling innenfor et fellesskap (community) som samhandler under et felles interoperabilitetsregime</strong>. Når man er del av fellesskapet vil man kunne sende meldinger til andre parter i fellesskapet uten å måtte inngå bilaterale avtaler om dette. Hver enkelt part registrerer sine samhandlingskapabiliteter i felles registre, for andre til å oppdage.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tips"></i>
</td>
<td class="content">
eMelding som referansearkitektur støtter mønstre for request-reply og korrelering av meldinger i prosessinstanser, tilsvarende slik dette legges opp til i spesifikasjonen av metadata i meldingsprofil for CEF eDelivery.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_grunnleggende_konsepter_for_emelding"><a class="anchor" href="#_grunnleggende_konsepter_for_emelding"></a><a class="link" href="#_grunnleggende_konsepter_for_emelding">4.4.2. Grunnleggende konsepter for eMelding</a></h4>
<div class="paragraph">
<p>eMelding bygger på et arkitekturmønster hvor avsender og mottaker kan benytte ulike teknologier og transportprotkoller. Se  <a href="../4-corner-model/4-hjørnersmodellen.html" class="page">4-hjørners-modellen fra EU CEF eDelivery</a>. for en nærmere redegjørelse om selve konseptet.</p>
</div>
</div>
<div class="sect3">
<h4 id="_konseptuelle_prosessbeskrivelser_arkitekturbyggeklosser"><a class="anchor" href="#_konseptuelle_prosessbeskrivelser_arkitekturbyggeklosser"></a><a class="link" href="#_konseptuelle_prosessbeskrivelser_arkitekturbyggeklosser">4.4.3. Konseptuelle prosessbeskrivelser (arkitekturbyggeklosser)</a></h4>
<div class="paragraph">
<p>Se konseptuelle prosessbeskrivelser for <a href="../generic-one-way-push/book-ra-generisk-meldingsutveksling.html" class="page">Generisk forsendelse</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_anvendelse_av_emelding_i_peppol_infrastrukturen_i_norge"><a class="anchor" href="#_anvendelse_av_emelding_i_peppol_infrastrukturen_i_norge"></a><a class="link" href="#_anvendelse_av_emelding_i_peppol_infrastrukturen_i_norge">4.4.4. Anvendelse av eMelding i PEPPOL-infrastrukturen i Norge</a></h4>
<div class="sect4">
<h5 id="_generelt_2"><a class="anchor" href="#_generelt_2"></a><a class="link" href="#_generelt_2">4.4.4.1. Generelt</a></h5>
<div class="paragraph">
<p>Beskrivelsene her viser på hvordan den generiske referansearkitekturen for eMelding kan realiseres med arkitektur- og løsningskomponenter som inngår i PEPPOL-infrastrukturen; basert på CEF eDelivery.</p>
</div>
<div class="paragraph">
<p>Utover de arkitekturtegningene som presenenteres, henvises til omfattende dokumentasjon av eDelivery og PEPPOL.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../eMelding/_images/PEPPOL%20eDelivery%20Network%20overview.png" alt="PEPPOL eDelivery Network overview">
</div>
<div class="title">Figur 11. PEPPOL eDelivery Network overview</div>
</div>
<div class="paragraph">
<p>Arkitektur- og løsningsbyggeklosser:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CEF SMP (Service Metadata Publisher): Oppslagstjeneste for å finne adresse og kapabiliteter for aktuell mottaker. Inneholder mottakers ID, aksesspunktadresse og dokumenttyper som mottaker kan motta. Aktuelle løsninger:  <a href="https://samarbeid.difi.no/felleslosninger/elma">ELMA</a>.</p>
</li>
<li>
<p>BCP (Business Certificate Publisher): Sertifikatutsteder. Løsninger: Se <a href="https://vefa.difi.no/bcp/" class="bare">https://vefa.difi.no/bcp/</a>.</p>
</li>
<li>
<p>Adressetjenesten CEF <a href="https://ec.europa.eu/cefdigital/wiki/display/CEFDIGITAL/SML+service">SML</a> (Service Metadata Locater): Global oppslagstjeneste for å finne fram til aktuell SMP.</p>
</li>
<li>
<p>BCL (Business Certificate Locator): Oppslagstjeneste for å finne BCP (introdusert ifm. Enhanced PEPPOL eDelivery Network).</p>
</li>
<li>
<p>Elektronisk mottakeradresseregister (<a href="https://samarbeid.difi.no/felleslosninger/elma">ELMA</a>): Norsk register over foretak som kan ta i mot dokumenter i standardisert EHF-format.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_klargjør_for_deling_av_data_ved_forsendelse_emelding_2"><a class="anchor" href="#_klargjør_for_deling_av_data_ved_forsendelse_emelding_2"></a><a class="link" href="#_klargjør_for_deling_av_data_ved_forsendelse_emelding_2">4.4.4.2. Klargjør for deling av data ved forsendelse (eMelding)</a></h5>
<div class="imageblock">
<div class="content">
<img src="../eMelding/_images/SBB_klargjøre.png" alt="Klargjør for eMelding (løsningsmønster) image">
</div>
<div class="title">Figur 12. Klargjør for eMelding (løsningsmønster)</div>
</div>
<div class="paragraph">
<p>Forklaring til figur:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 6. Elementer i view for Klargjør for eMelding (løsningsmønster)</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samhandlingsaktør</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samlebetegnelse på roller som inngår i en samhandlingsprosess og samhandler med en annen samhandlingsaktør. Kan være en tilbyder, konsument, avsender, mottaker, leverandør etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Klargjøre for deling av data ved forsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evne til å klargjøre for meldingsutveksling med eksterne parter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Klargjør for melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å klargjøre for melding ved å  inngå nødvendige avtaler og tilgjengeliggjøre nødvendig informasjon til andre samhandlingsaktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtaler for meldingsforsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å inngå bilaterale avtaler med sammhandlingsparter eller innmelding i et fellesskap. F.eks. gjennom å akseptere spesifikke avtaler, vilkår eller kontrakter og innrette seg etter reglene og forpliktelsene som gjelder i et fellesskap (community), eller det som er avtalt mellom samhanslingsaktørene.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrer kapabiliteter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registering av kapabiliteter vil si å tilgjengeligjøre for avsendere og konsumenter hvilke meldinger og formater man kan motta og hvilke ressurser og tjenester man tilbyr.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrer adresser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Med adresse menes nødvendig informasjon for å få tilgang til tjenester fra tilbyder eller for å sende melding til mottaker av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrer sertifikater</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilgjengeliggjøre for samhandlende parter sertifikater for bruk ved forsendelser. Dette kan være generelle eller domenespesifikke sertifikater. Eventuelt spesifikt for enkelet forretningsområder.</p>
<p class="tableblock">Sertifikater må forvaltes og fornyes etter gjeldende regler for å være gyldige og egnet for bruk.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kapabilitetsregistrering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registrere kapabiliteter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adresseregistrering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registrere adresse for å sende melding til mottaker.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sertifikatregisterering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registrere serifikater i felles katalogtjeneste.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenPeppol</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Elektronisk mottakerregister (ELMA)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Med ELMA får brukerne dine oversikt over alle virksomheter i Norge som kan motta elektroniske fakturaer i henhold til EHF-standarden.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CEF SML</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Metadata Locator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BCL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Certificate Locater</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BCP (CommFides eller Buypass)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Certificate Publisher</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_operativ_deling_av_data_ved_forsendelse_emelding_2"><a class="anchor" href="#_operativ_deling_av_data_ved_forsendelse_emelding_2"></a><a class="link" href="#_operativ_deling_av_data_ved_forsendelse_emelding_2">4.4.4.3. Operativ deling av data ved forsendelse (eMelding)</a></h5>
<div class="sect5">
<h6 id="_send_emelding_2"><a class="anchor" href="#_send_emelding_2"></a><a class="link" href="#_send_emelding_2">4.4.4.3.1. Send eMelding</a></h6>
<div class="imageblock">
<div class="content">
<img src="../eMelding/_images/Send%20eMelding%20%20(løsningsmønster).png" alt="Send eMelding  (løsningsmønster) image">
</div>
<div class="title">Figur 13. Send eMelding  (løsningsmønster)</div>
</div>
<div class="paragraph">
<p>Forklaring til figur:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 7. Elementer i view for Send eMelding  (løsningsmønster)</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avsender</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som sender et brev, en pakke, en e-post, en elektronisk melding, en SMS eller lignende.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sende data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å sende data til en mottaker.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å sende en eMelding til en mottaker ved hjelp av fellestjenester.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kontroller mottakers kapabiliteter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å slå opp og kontrollere mottakers evner til samhandling innenfor fellesskapet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formater melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å tilpasse informasjonspakken til mottakers kapabiliteter og fellesskapets standarder.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Krypter melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess med å sikre forsendelsen. Inkluderer konfidensialitets- og integritetssikring der dette er nødvendig. Normalt gjøres dette ved hjelp av kryptografi og sertifikater.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adresser forsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess med å adressere forsendelsen. Dette kan være til mottaker direkte eller til dennes representant eller aksesspunkt,</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Signer forsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å signere meldingen som sendes til mottaker. Til dette benyttes eget sertifikats private nøkkel.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eksepeder melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å sende melding til mottaker.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kapabilitetsoppslag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å slå opp kapabilitetene til en samhandlingspart</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatransformasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for  transformere data og meldinger til andre formater.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sertifikatoppslag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å hente krypteringssertifkat til mottaker.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adresseoppslag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å slå opp adressen til en mottaker.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Signeringstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å signere en elektronisk melding. For eMelding er det signatur i form av elektronisk segl som er mest relevant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datautvekslings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for utveksling av data. Samme som data exchange service. Benyttes av avsender og mottaker for transport av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sporingstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for sporing (audit) av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CEF SML</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Metadata Locator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Elektronisk mottakerregister (ELMA)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Med ELMA får brukerne dine oversikt over alle virksomheter i Norge som kan motta elektroniske fakturaer i henhold til EHF-standarden.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BCL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Certificate Locater</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BCP (CommFides eller Buypass)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Certificate Publisher</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PEPPOL</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_motta_emelding_2"><a class="anchor" href="#_motta_emelding_2"></a><a class="link" href="#_motta_emelding_2">4.4.4.3.2. Motta eMelding</a></h6>
<div class="imageblock">
<div class="content">
<img src="../eMelding/_images/Motta%20eMelding%20(løsningsmønster).png" alt="Motta eMelding (løsningsmønster) image">
</div>
<div class="title">Figur 14. Motta eMelding (løsningsmønster)</div>
</div>
<div class="paragraph">
<p>Forklaring til figur:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 8. Elementer i view for Motta eMelding (løsningsmønster)</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mottaker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som mottar en elektronisk melding eller tilsvarende.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å motta, validere og kvittere for mottatte meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å motta melding. Består av flere delprosesser.</p>
<p class="tableblock">Etter mottak må mottaker følge opp og håndtere innholdet i meldingen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta forsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å motta en melding fra avsender</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kontroller forsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å kontrollere om forsendelsen er autentisk og fra en legitim avsender.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dekrypter melding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å dekryptere mottatt melding.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valider forsendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å kontrollere om innholdet i en forsendelse er i henhold til avtale og avtalte formater.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datautvekslings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for utveksling av data. Samme som data exchange service. Benyttes av avsender og mottaker for transport av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sporingstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for sporing (audit) av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Signaturvaliderings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å validere og verifisere elektronsike signaturer. I forbindelse med eMelding er det kontroll av elektronisk segl som er mest relevant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datavaliderings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å validere meldinger mot format og forventet innhold.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PEPPOL</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_videre_informasjon_om_emelding"><a class="anchor" href="#_videre_informasjon_om_emelding"></a><a class="link" href="#_videre_informasjon_om_emelding">4.4.5. Videre informasjon om eMelding</a></h4>
<div class="paragraph">
<p>Videre informasjon og og dokumentasjon om eMelding finnes under <a href="https://www.difi.no/fagomrader-og-tjenester/digitalisering-og-samordning/nasjonal-arkitektur-old/referansearkitektur-meldingsutveksling-emelding" class="bare">https://www.difi.no/fagomrader-og-tjenester/digitalisering-og-samordning/nasjonal-arkitektur-old/referansearkitektur-meldingsutveksling-emelding</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_forespørsel_svar_eoppslag"><a class="anchor" href="#_forespørsel_svar_eoppslag"></a><a class="link" href="#_forespørsel_svar_eoppslag">4.4.6. Forespørsel-svar (eOppslag)</a></h4>

</div>
</div>
<div class="sect2">
<h3 id="_generisk_forespørsel_svar"><a class="anchor" href="#_generisk_forespørsel_svar"></a><a class="link" href="#_generisk_forespørsel_svar">4.5. Generisk forespørsel-svar</a></h3>
<div class="sect3">
<h4 id="_om_dette_mønsteret"><a class="anchor" href="#_om_dette_mønsteret"></a><a class="link" href="#_om_dette_mønsteret">4.5.1. Om dette mønsteret</a></h4>
<div class="paragraph">
<p><em>Generisk mønster for spørring og oppslag</em> adresserer området <em>Deling av data på forespørsel</em> og omhandler tilgjengeliggjøring av data og oppslag i data, som sett fra henholdvis datatilbyder og datakonsument.</p>
</div>
<div class="paragraph">
<p>Mønsteret dekker både asynkrone og synkrone oppslag, og det tas ikke stilling til kommunikasjonsprotokoll. Spørring og oppslag kan gjøres både mot data med ulike grader av tilgangsbegrensninger og mot åpne data helt uten tilgangsstyring.</p>
</div>
<div class="paragraph">
<p>Mønsteret gir heller ingen begrensninger i hva slags informasjon det gjelder, om det er strukturerte eller ustrukturerte data, eller hva data skal brukes til. Tilbyder og konsument av data kan være på tvers av virksomheter eller innenfor samme virksomhet.</p>
</div>
<div class="paragraph">
<p>Eksempler på bruk:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Oppslag i et felles dataregister, f.eks. Folkeregisteret.</p>
</li>
<li>
<p>Oppslag av data hos en annen virksomhet .</p>
</li>
<li>
<p>Oppslag av data i egen virksomhet.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_kapabiliteter_for_deling_av_data_på_forespørsel"><a class="anchor" href="#_kapabiliteter_for_deling_av_data_på_forespørsel"></a><a class="link" href="#_kapabiliteter_for_deling_av_data_på_forespørsel">4.5.2. Kapabiliteter for deling av data på forespørsel</a></h4>
<div class="paragraph">
<p>Modellen under viser hovedinndelingen i kapabiliteter en tilbyder og en konsument må ha for å dele data gjennom spørring og oppslag. Dette er av området som omhandler <em>Deling av data på forespørsel</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../generic-request-reply/_images/Kapabiliteter,%20deling%20av%20data%20på%20forespørsel.png" alt="Kapabiliteter" width="deling av data på forespørsel image">
</div>
<div class="title">Figur 15. Kapabiliteter, deling av data på forespørsel</div>
</div>
<div class="paragraph">
<p>Tilbyder må kunne tilgjengeliggjøre data og dette er delt i to kapabiliteter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Tilgjengeliggjøre data</em> omhandler hvordan man registerer og setter opp tilganger.</p>
</li>
<li>
<p><em>Avgi data</em> omhandler den operative delingen av data fra tilbyder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tilsvarende er det to detaljerte kapabiliteter tilknyttet konsument og det å innhente data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Få tilgang til data</em> består av prosesser for oppsett av tilgang.</p>
</li>
<li>
<p><em>Innhente data</em> er det konsumenten må gjøre hver gang det gjøres et oppslag.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>I tillegg kan begge parter ha kapabiliteten:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Delegering av rettigheter til databehandler</em> må gjøres dersom en av partene benytter seg av en databehandler.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 9. Elementer i view for Kapabiliteter, forespørsel-svar</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatilbyder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyder av data til andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datakonsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som innhenter eller mottar data fra andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delegere rettigheter til databehandler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å delegere rettigheter til databehandler som utfører oppgaver på vegne av behandlingsansvarlig.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilgjengeliggjøre data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å gjøre data tilgjengelig for aktører utenfor egen virksomhet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Få tilgang til data (konsument)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å skaffe seg tilgang til tilbudte data fra annen aktør.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evne til å avgi data på forespørsel. Kan omfatte tilgangsstyring.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Innhente data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å innhente data fra en annen aktør.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_eoppslag_konseptuell_beskrivelse"><a class="anchor" href="#_eoppslag_konseptuell_beskrivelse"></a><a class="link" href="#_eoppslag_konseptuell_beskrivelse">4.6. eOppslag - konseptuell beskrivelse</a></h3>
<div class="sect3">
<h4 id="_om_dette_mønsteret_2"><a class="anchor" href="#_om_dette_mønsteret_2"></a><a class="link" href="#_om_dette_mønsteret_2">4.6.1. Om dette mønsteret</a></h4>
<div class="paragraph">
<p>eOppslag som arkitekturmønster beskriver synkrone API-kall mot en datatilbyder med tilgangsstyring ved bruk av sikkerhetsbilletter.</p>
</div>
<div class="paragraph">
<p>Her beskrives realiseringen av kapabilitetene i det generiske mønsteret for deling av data på forespørsel innenfor rammene av synkrone oppslag mot APIer og tilgangsstyring ved bruk av sikkerhetsbilletter.</p>
</div>
<div class="paragraph">
<p>Beskrivelsene er forsøkt å holdes generisk uten å peke til noen løsning og det vil dermed kunne være flere måter å realisere de ulike elementene på.</p>
</div>
</div>
<div class="sect3">
<h4 id="_klargjøring_for_deling_av_data_på_forespørsel"><a class="anchor" href="#_klargjøring_for_deling_av_data_på_forespørsel"></a><a class="link" href="#_klargjøring_for_deling_av_data_på_forespørsel">4.6.2. Klargjøring for <em>deling av data på forespørsel</em></a></h4>
<div class="sect4">
<h5 id="_tilgjengeliggjøre_data"><a class="anchor" href="#_tilgjengeliggjøre_data"></a><a class="link" href="#_tilgjengeliggjøre_data">4.6.2.1. Tilgjengeliggjøre data</a></h5>
<div class="paragraph">
<p>Tilgjengeliggjøring av API gjøres av tilbyder av data og er det tilbyder må gjennomføre for å gjøre et API synlig og tilgjengelig gjennom kataloger og søkeløsninger. Registrering av konsumenters rettigheter og tilganger inngår også som et prosessteg.</p>
</div>
<div class="paragraph">
<p>Dersom det er registrering av et åpent API, er det kun relevante prossessteg som utføres.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://nasjonal-arkitektur.github.io/nab_modeller_html-hovedbibliotek/e7e6c527-26f4-461c-b4dd-651fcbe85c8d/views/0134474e-0b53-4b7c-b4e2-cf2f2e957616.html"><img src="../eOppslag-conceptual/_images/ABB_Tilgjengeliggjøre.png" alt="Bilde mangler"></a>
</div>
<div class="title">Figur 16. Tilgjengeliggjøre data</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 10. Elementer i view for Tilgjengeliggjøre data</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatilbyder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyder av data til andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilgjengeliggjøre data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å gjøre data tilgjengelig for aktører utenfor egen virksomhet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bruksavtale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avtale om tilgang til og bruk av data. Dette kan for eksempel være en bilateralt utformet avtale, aksept av generelle bruksvilkår eller lisens for bruk av åpne data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilgjengeliggjøre API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å tilby data gjennom et API til aktører utenfor egen virksomhet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrere API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess med å registere API i relevante tjenester, api-katalog, Maskinporten, Kapabilitetsoversikt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtale om tilgang til data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å inngå avtale om tilgang og bruk av data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tildele tilganger til API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å registrere hvilke databrukere som skal få tilgang
Sette policy, og grov tilgangsstyring gjennom maskinporten.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrere brukere av samtykke</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å registrere konsumenter som skal ha mulighet for å innhente samtykker som gir tilgang til en tjeneste.</p>
<p class="tableblock">Dette utføres kun om det er behov for samtykke for tilgang til dataene.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API-registreringstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registerer de API-ene man ønsker å tilby til konsumenter og egenskaper ved disse.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrering av API-brukere</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for gjennom selvbetjening å registrere og vedlikeholde tilgangene konsumenter skal ha til API-er og scopes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrere samtykkebasert tilgang</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registerer konsumenter som kan innhente samtykke som gir grunnlag for utlevering fra datatilbyder.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_få_tilgang_til_data"><a class="anchor" href="#_få_tilgang_til_data"></a><a class="link" href="#_få_tilgang_til_data">4.6.2.2. Få tilgang til data</a></h5>
<div class="paragraph">
<p><em>Få tilgang til API</em> er det en konsument av data må gjøre for å få tilgang til data gjennom et API. Det omfatter å få kjennskap til aktuelt API, inngå avtale om bruk av data, samt å registrere den tekniske komponenten som skal utføre tjenestekallet. Dersom det dreier seg om tilgang til et <em>åpent tilgjengelig</em> API, kan enkelte delaktiviteter i prosessene hoppes over.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://nasjonal-arkitektur.github.io/nab_modeller_html-hovedbibliotek/e7e6c527-26f4-461c-b4dd-651fcbe85c8d/views/6c5a004d-da35-4fce-b38d-4b09d1167201.html"><img src="../eOppslag-conceptual/_images/ABB_Tilgang.png" alt="Bilde mangler" width="750"></a>
</div>
<div class="title">Figur 17. Få tilgang til data</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 11. Elementer i view for Få tilgang til data</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datakonsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som innhenter eller mottar data fra andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Få tilgang til data (konsument)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å skaffe seg tilgang til tilbudte data fra annen aktør.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bruksavtale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avtale om tilgang til og bruk av data. Dette kan for eksempel være en bilateralt utformet avtale, aksept av generelle bruksvilkår eller lisens for bruk av åpne data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Få tilgang til API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å skaffe seg tilgang til tilbudte data fra annen aktør. Omfatte å finne API-er, inngå nødvendige avtaler og få tilganger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finn/få kjennskap til API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å finne eller få kjennskap til tilgjengelige API-er gjennom relevante kataloger og søkeløsninger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtale om tilgang til data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å inngå avtale om tilgang og bruk av data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registreringstjeneste for API-brukere</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registrere klienter som skal ha tilgang til et gitt API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API-søk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å søke etter og finne tilgjengelige API-er</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrer klient med tildelt tilgang</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for konsument å registerere (provisjonering av) den klienten som skal ha tilgang til API-et ved bruk av sikkerhetsbillett. Dette forutsetter at konsumenten har avtale om bruk av sikkerhetsbillettjenesten og at tilbyder har gitt konsumenten tilgang.</p>
<p class="tableblock">Dersom det er en leverandør som har blitt delegert rettigheter som databehandler på vegne av konsument er det leverandøren som registrer sin klient.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_delegere_rettigheter_til_databehandler"><a class="anchor" href="#_delegere_rettigheter_til_databehandler"></a><a class="link" href="#_delegere_rettigheter_til_databehandler">4.6.2.3. Delegere rettigheter til databehandler</a></h5>
<div class="paragraph">
<p>Delegering av rettigheter til databehandler er det en konsument må gjøre for at en leverandør kan identifisere seg med sitt eget virksomhetssertifikat og opptre på vegne av konsumenten som er den som innehar behandlingsgrunnlaget for å innhente data.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://nasjonal-arkitektur.github.io/nab_modeller_html-hovedbibliotek/e7e6c527-26f4-461c-b4dd-651fcbe85c8d/views/7ad70658-c174-4da3-95e1-b0628688bcc1.html"><img src="../eOppslag-conceptual/_images/ABB_Delegering.png" alt="Bilde mangler" width="500"></a>
</div>
<div class="title">Figur 18. Delegere rettigheter til databehandler</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 12. Elementer i view for Delegere rettigheter til databehandler</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samhandlingsaktør</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samlebetegnelse på roller som inngår i en samhandlingsprosess og samhandler med en annen samhandlingsaktør. Kan være en tilbyder, konsument, avsender, mottaker, leverandør etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delegere rettigheter til databehandler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å delegere rettigheter til databehandler som utfører oppgaver på vegne av behandlingsansvarlig.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjenesteavtale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avtale mellom leverandør og konsument som er grunnlaget for å kunne delegere rettigheter fra konsument til en leverandør</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delegering av rettigheter til databehandler (leverandør)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å delegere rettigheter til databehandler/leverandør.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtale med leverandør</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å inngå en avtale med leverandør. En slik avtale vil normalt være inngått tidligere og uavhengig av om man skal ta i bruk et nytt API. En tjenesteavtale med leverandør er en forutsetning for å kunne delegere en tilgang.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrere delegert tilgang</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å delegere tilganger. I tilknytning til eOppslag vil formålet være å gi leverandør tilgang til å representere konsument overfor et API, men registreringen vil potensielt også kunne gjelde for andre områder.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registering av representasjonsforhold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registrere et representasjonsforhold som gir leverandør mulighet til å opptre på vegne av konsument</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_utveksling_av_data"><a class="anchor" href="#_utveksling_av_data"></a><a class="link" href="#_utveksling_av_data">4.6.3. Utveksling av data</a></h4>
<div class="sect4">
<h5 id="_innhente_data"><a class="anchor" href="#_innhente_data"></a><a class="link" href="#_innhente_data">4.6.3.1. Innhente data</a></h5>
<div class="paragraph">
<p>Slå opp data gjennom et API er det en konsument må gjøre når det utføres et tjenestekall for å innhente data gjennom et API. Dersom det er et åpent API er det kun relevante prossessteg som utføres.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://nasjonal-arkitektur.github.io/nab_modeller_html-hovedbibliotek/e7e6c527-26f4-461c-b4dd-651fcbe85c8d/views/4742dd13-f1fe-4e78-80a8-80929a62efb9.html"><img src="../eOppslag-conceptual/_images/ABB_Innhente.png" alt="Bilde mangler"></a>
</div>
<div class="title">Figur 19. Innhente data</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 13. Elementer i view for Innhente data</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datakonsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som innhenter eller mottar data fra andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Innhente data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å innhente data fra en annen aktør.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forespørsel om data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forespørsel om data med parametetere i forespørselen, sikkerhetsbillett mv.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slå opp data gjennom et API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å slå opp og hente data gjennom et API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Innhent samtykke ved behov</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å innhente samtykke fra person eller virksomhet som grunnlag for å innhente data. Dette gjøres kun ved behov.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hent teknisk endepunkt ved behov</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen å slå opp den tekniske adressen til et API før spørring mot API-et. Gjøres kun dersom det er nødvendig.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Be om tilgangstoken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å benytte en sikkerhetsbillettjeneste for hente en sikkerhetsbillett som gir tilgang til et API. Dette forutsetter at alt er registert og satt opp riktig mot de aktuelle tjenestene.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utfør tjenestekall</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å benytte (gjøre et oppslag mot) et eksternt API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samtykkeregistererings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å innhente samtykke fra den registrert som dataene gjelder. Dette kan være en person eller en virksomhet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adressetjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste som gir mulighet til å slå opp teknisk endepunkt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tokentjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste som utsteder sikkerhetsbilletter. Sikkerhetsbillett utstedes basert på tildelte rettigheter og eventuelle representasjonsforhold.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datautvekslings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for utveksling av data. Samme som data exchange service. Benyttes av avsender og mottaker for transport av meldinger.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_avgi_data"><a class="anchor" href="#_avgi_data"></a><a class="link" href="#_avgi_data">4.6.3.2. Avgi data</a></h5>
<div class="paragraph">
<p>Avgi forespurte data er det tilbyder av data må gjøre for å svare på en forespørsel. Prosessen kontrollere tilgang gjøres kun dersom det er enakk om å avgi data gjennom et sikret API.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://nasjonal-arkitektur.github.io/nab_modeller_html-hovedbibliotek/e7e6c527-26f4-461c-b4dd-651fcbe85c8d/views/c993199e-3879-4f72-967d-4339159f6641.html"><img src="../eOppslag-conceptual/_images/ABB_Avgi.png" alt="Bilde mangler"></a>
</div>
<div class="title">Figur 20. Avgi data</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 14. Elementer i view for Avgi data</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatilbyder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyder av data til andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evne til å avgi data på forespørsel. Kan omfatte tilgangsstyring.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forespørsel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Informasjon om det som forespørres.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autentiseringsdata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data som autentiserer konsument, f.eks. digitalt sertifikat eller sikkerhetsbillett.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autorisasjonsdata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data som autoriserer konsument, f.eks. påstander i en sikkerhetsbillett.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Svar på forespørsel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Informasjonen som avgis til konsument som svar på en forespørsel.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi forespurte data gjennom API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å avgi data på forespørsel gjennom et egnet API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta  forespørsel om oppslag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta forespørsler fra API-konsument om å avgi data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autentisere konsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å autentisere en kosnument.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kontroller tilgang</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kontroll og håndheving av konsumentens rettigheter til å få forespurte data.  I tillegg til "validering av sikkerhetsbillet", kan det være behov for kontroll mot virksomhetsinterne policies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å gi svar på forespørselen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datautvekslings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for utveksling av data. Samme som data exchange service. Benyttes av avsender og mottaker for transport av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autentiseringstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste som benyttes av tilbyder for å validere og kontrollere autentisiteten til et OAUTH2 token fra Maskinporten</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilgangskontroll-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å sjekke rettigheter til data. Kan være eksterne eller interne tjenester.
Eksempler på rettigheter kan komme av samtykker fra person eller virksomhet, eller rollebasert fra vergemål, familierelasjon el.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datautvekslings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for utveksling av data. Samme som data exchange service. Benyttes av avsender og mottaker for transport av meldinger.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_eoppslag_bruk_av_nasjonale_fellesløsninger"><a class="anchor" href="#_eoppslag_bruk_av_nasjonale_fellesløsninger"></a><a class="link" href="#_eoppslag_bruk_av_nasjonale_fellesløsninger">4.7. eOppslag - bruk av nasjonale fellesløsninger</a></h3>
<div class="sect3">
<h4 id="_om_dette_mønsteret_3"><a class="anchor" href="#_om_dette_mønsteret_3"></a><a class="link" href="#_om_dette_mønsteret_3">4.7.1. Om dette mønsteret</a></h4>
<div class="paragraph">
<p>Beskrivelsene her viser hvordan den konseptuelle arkitekturen for eOppslag kan realiseres med løsningskomponentene Maskinporten, API-katalogen og Altinn-autorisasjon. Disse fellesløsningene leverer de tjenestene som er beskrevet på forretningsnivå over.</p>
</div>
<div class="paragraph">
<p>eOppslag kan benyttes både for sikrede API-er og API-er som tilbyr åpent tilgjengelige data uten tilgangsbegrensninger.</p>
</div>
<div class="paragraph">
<p>Det er ikke hensikten å låse referansearkitekturen til spesifikke løsninger, da ulike sektorer og aktører kan ha behov som ikke passer med det som er beskrevet. For synkrone tjenestekall basert på REST og med tilgangsstyring ved hjelp av OAUTH2-tokens, vil det være god støtte i å benytte de foreslåtte løsningene.</p>
</div>
<div class="paragraph">
<p>Nederst i beskrivelsen av løsningsmønstre er det en overordnet beskrivelse av hvilke data som inngår i registrering i de ulike komponentene.</p>
</div>
<div class="paragraph">
<p>For å registrere API må man for i de respektive fellestjenestene ha rettigheter til dette på vegne av egen virksomhet. Dette tildeles iht. hvem som har rettigheter i enhetsregisteret og rettighetene må delegeres nedover i organisasjonen til den som skal gjennomføre registreringen. Dette foregår i Altinn.</p>
</div>
</div>
<div class="sect3">
<h4 id="_klargjøring_for_deling_av_data_på_forespørsel_2"><a class="anchor" href="#_klargjøring_for_deling_av_data_på_forespørsel_2"></a><a class="link" href="#_klargjøring_for_deling_av_data_på_forespørsel_2">4.7.2. Klargjøring for <em>deling av data på forespørsel</em></a></h4>
<div class="sect4">
<h5 id="_tilgjengeliggjøre_data_2"><a class="anchor" href="#_tilgjengeliggjøre_data_2"></a><a class="link" href="#_tilgjengeliggjøre_data_2">4.7.2.1. Tilgjengeliggjøre data</a></h5>
<div class="paragraph">
<p>For å tilby data gjennom et API sikret med fellestjenester må tilbyder inngå avtale for bruk av Maskinporten og Felles API-katalog. De respektive API-ene og hvem som skal ha hvilke rettighetene til disse må så registreres i løsningene.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://nasjonal-arkitektur.github.io/nab_modeller_html-hovedbibliotek/e7e6c527-26f4-461c-b4dd-651fcbe85c8d/views/80c1baa6-55d8-4434-ab14-55e2d0afa827.html"><img src="../eOppslag-solution-no/_images/SBB_Tilgjengeliggjøre.png" alt="Bilde mangler"></a>
</div>
<div class="title">Figur 21. Tilgjengeliggjøre data</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 15. Elementer i view for Tilgjengeliggjøre data løsningsmønster</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatilbyder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyder av data til andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilgjengeliggjøre data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å gjøre data tilgjengelig for aktører utenfor egen virksomhet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilgjengeliggjøre API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å tilby data gjennom et API til aktører utenfor egen virksomhet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrere API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess med å registere API i relevante tjenester, api-katalog, Maskinporten, Kapabilitetsoversikt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtale om tilgang til data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å inngå avtale om tilgang og bruk av data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tildele tilganger til API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å registrere hvilke databrukere som skal få tilgang
Sette policy, og grov tilgangsstyring gjennom maskinporten.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrere brukere av samtykke</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å registrere konsumenter som skal ha mulighet for å innhente samtykker som gir tilgang til en tjeneste.</p>
<p class="tableblock">Dette utføres kun om det er behov for samtykke for tilgang til dataene.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrere Open API specification¨</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste i Felles API-katalogen for å registrere API. Bruk av tjenesten forutsetter at rettigheter til å gjøre dette på vegne av tilbyders virksomhet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Selvbetjeningstjeneste for administrasjon av integrasjoner og APIer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste "administrasjonssentre" vil ha rettigheter til å registrere på vegne av andre f.eks. API-katalogen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrering av API-brukere</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for gjennom selvbetjening å registrere og vedlikeholde tilgangene konsumenter skal ha til API-er og scopes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrere samtykkebasert tilgang</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registerer konsumenter som kan innhente samtykke som gir grunnlag for utlevering fra datatilbyder.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beskrivelse API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataobjekt som er en maskinlesbar beskrivelse av REST API-er iht. Open API Specification. Dette er formatet som benyttes for å registrere et API i felles API-katalog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token-egenskaper</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Egenskaper som f.eks. gyldighetstid ved tilgangstoken som er Maskinportens variant av sikkerhetsbillett.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OAUTH scopes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataobjekt som som kan beskrives som en ressurs-definisjon, og et token er som regel knyttet til ett eller flere scopes. Scopes benyttes til å styre tilganger til API-er og operasjoner, samt eventuelt hva slags responser man får fra API-er.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilganger konsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oversikt over hvilke API og OAUTH-scopes en virksomhet (representert ved organisasjonsnummer) skal ha tilgang til (utstedt token for).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aktører som kan innhente samtykke for bruk av API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oversikt over aktører som skal ha mulighet til å innhente samtykke som grunnlag for å få tilgang til data gjennom et API.
URL til konsumenten det kan innhentes samtykke for må inngå i beskrivelsen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Felles API-katalog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Del av Felles datakatalog som gir mulighet for å søke etter API-er og lese API-spesifikasjoner <a href="https://fellesdatakatalog.brreg.no/apis" class="bare">https://fellesdatakatalog.brreg.no/apis</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maskinporten</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maskinporten er en løsning for tilgangsstyring for virksomheter som utveksler data. Løsningen garanterer identiteten mellom virksomheter, og sørger for maskin-til-maskin autentisering</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Altinn autorisasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autorisasjonskomponenten i Altinn som gir muligheter til å delegere rettigheter til andre organisasjoner eller personer. Rettigheter til bruk av autorisasjonskomponenten baserer seg på registrerte roller i Enhetsregisteret.
Altinn autorisasjon leverer også tjenester for å registrere og kontrollere samtykke gitt av person eller virksomhet.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_få_tilgang_til_data_2"><a class="anchor" href="#_få_tilgang_til_data_2"></a><a class="link" href="#_få_tilgang_til_data_2">4.7.2.2. Få tilgang til data</a></h5>
<div class="paragraph">
<p>For å få tilgang til data gjennom et API sikret ved hjelp av nasjonale fellesløsninger, må konsumenten inngå avtale for bruk av Maskinporten og registrere den tekniske klienten som skal benytte løsningen.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://nasjonal-arkitektur.github.io/nab_modeller_html-hovedbibliotek/e7e6c527-26f4-461c-b4dd-651fcbe85c8d/views/32191953-d527-4b27-8a58-b8ec5fd93660.html"><img src="../eOppslag-solution-no/_images/SBB_Tilgang.png" alt="Bilde mangler"></a>
</div>
<div class="title">Figur 22. Få tilgang til data</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 16. Elementer i view for Få tilgang til data - løsningsmønster</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datakonsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som innhenter eller mottar data fra andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Få tilgang til data (konsument)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å skaffe seg tilgang til tilbudte data fra annen aktør.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Få tilgang til API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å skaffe seg tilgang til tilbudte data fra annen aktør. Omfatte å finne API-er, inngå nødvendige avtaler og få tilganger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finn/få kjennskap til API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å finne eller få kjennskap til tilgjengelige API-er gjennom relevante kataloger og søkeløsninger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtale om tilgang til data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å inngå avtale om tilgang og bruk av data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrer klient med tildelt tilgang</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for konsument å registerere (provisjonering av) den klienten som skal ha tilgang til API-et ved bruk av sikkerhetsbillett. Dette forutsetter at konsumenten har avtale om bruk av sikkerhetsbillettjenesten og at tilbyder har gitt konsumenten tilgang.</p>
<p class="tableblock">Dersom det er en leverandør som har blitt delegert rettigheter som databehandler på vegne av konsument er det leverandøren som registrer sin klient.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API-søk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å søke etter og finne tilgjengelige API-er</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registreringstjeneste for API-brukere</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registrere klienter som skal ha tilgang til et gitt API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beskrivelse API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataobjekt som er en maskinlesbar beskrivelse av REST API-er iht. Open API Specification. Dette er formatet som benyttes for å registrere et API i felles API-katalog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Felles API-katalog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Del av Felles datakatalog som gir mulighet for å søke etter API-er og lese API-spesifikasjoner <a href="https://fellesdatakatalog.brreg.no/apis" class="bare">https://fellesdatakatalog.brreg.no/apis</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maskinporten</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maskinporten er en løsning for tilgangsstyring for virksomheter som utveksler data. Løsningen garanterer identiteten mellom virksomheter, og sørger for maskin-til-maskin autentisering</p></td>
</tr>
</tbody>
</table>
<div class="sect5">
<h6 id="_delegering_av_rettigheter_til_databehandler"><a class="anchor" href="#_delegering_av_rettigheter_til_databehandler"></a><a class="link" href="#_delegering_av_rettigheter_til_databehandler">4.7.2.2.1. Delegering av rettigheter til databehandler</a></h6>
<div class="paragraph">
<p>Dersom konsumenten benytter en leverandør som skal opptre på konsumentens vegne, må dette forholdet registereres gjennom Altinn autorisasjon slik at det blir tilgjengelig for Maskinporten å kontrollere representasjonsforholdet.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://nasjonal-arkitektur.github.io/nab_modeller_html-hovedbibliotek/e7e6c527-26f4-461c-b4dd-651fcbe85c8d/views/3d9dcb59-8e6e-4f2d-aee7-c729dea4f53f.html"><img src="../eOppslag-solution-no/_images/SBB_Delegering.png" alt="Bilde mangler"></a>
</div>
<div class="title">Figur 23. Delegering av rettigheter til databehandler</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 17. Elementer i view for Delegere rettigheter til databehandler - løsningsmønster</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samhandlingsaktør</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samlebetegnelse på roller som inngår i en samhandlingsprosess og samhandler med en annen samhandlingsaktør. Kan være en tilbyder, konsument, avsender, mottaker, leverandør etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delegere rettigheter til databehandler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å delegere rettigheter til databehandler som utfører oppgaver på vegne av behandlingsansvarlig.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delegering av rettigheter til databehandler (leverandør)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å delegere rettigheter til databehandler/leverandør.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtale med leverandør</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å inngå en avtale med leverandør. En slik avtale vil normalt være inngått tidligere og uavhengig av om man skal ta i bruk et nytt API. En tjenesteavtale med leverandør er en forutsetning forutsetning for å kunne delegere en tilgang.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrere delegert tilgang</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å delegere tilganger. I tilknytning til eOppslag vil formålet være å gi leverandør tilgang til å representere konsument overfor et API, men registreringen vil potensielt også kunne gjelde for andre områder.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delegerbar ressurs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataobjekt som beskriver en ressurs, f.eks. et API, som det kan gis rettigheter til gjennom et representasjonsforhold.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registering av representasjonsforhold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registrere et representasjonsforhold som gir leverandør mulighet til å opptre på vegne av konsument</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Altinn autorisasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autorisasjonskomponenten i Altinn som gir muligheter til å delegere rettigheter til andre organisasjoner eller personer. Rettigheter til bruk av autorisasjonskomponenten baserer seg på registrerte roller i Enhetsregisteret.
Altinn autorisasjon leverer også tjenester for å registrere og kontrollere samtykke gitt av person eller virksomhet.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_informasjon_som_inngår_i_klargjøring_av_forespørsel"><a class="anchor" href="#_informasjon_som_inngår_i_klargjøring_av_forespørsel"></a><a class="link" href="#_informasjon_som_inngår_i_klargjøring_av_forespørsel">4.7.2.3. Informasjon som inngår i klargjøring av forespørsel</a></h5>
<div class="paragraph">
<p>Figuren under viser hvilken informasjons som må registreres i de ulike komponentene som del av klargjøringen for å forespørre data fra et API.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://nasjonal-arkitektur.github.io/nab_modeller_html-hovedbibliotek/e7e6c527-26f4-461c-b4dd-651fcbe85c8d/views/6a46c6d0-64eb-43d4-97f3-2a94516c2211.html"><img src="../eOppslag-solution-no/_images/Dataobjekter%20eOppslag.png" alt="Bilde mangler" width="500"></a>
</div>
<div class="title">Figur 24. Informasjon som inngår i klargjøring av forespørsel</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 18. Elementer i view for Dataobjekter eOppslag</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API-katalogen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API-katalogen er en del av Felles datakatalog som inneholder API-beskrivelser med endepunktsadresser og kobling til datasett.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beskrivelse API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataobjekt som er en maskinlesbar beskrivelse av REST API-er iht. Open API Specification. Dette er formatet som benyttes for å registrere et API i felles API-katalog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Endepunkt (adresse)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataobjekt som representerer teknisk adresse til et API eller ressurs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Altinn autorisasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autorisasjonskomponenten i Altinn som gir muligheter til å delegere rettigheter til andre organisasjoner eller personer. Rettigheter til bruk av autorisasjonskomponenten baserer seg på registrerte roller i Enhetsregisteret.
Altinn autorisasjon leverer også tjenester for å registrere og kontrollere samtykke gitt av person eller virksomhet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delegerbar ressurs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataobjekt som beskriver en ressurs, f.eks. et API, som det kan gis rettigheter til gjennom et representasjonsforhold.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beskrivelse av aktør som kan innhente samtykke</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataobjekt som beskriver en datakonsument som har rett til å innhente samtykke om å slå opp data.
Viktig innholde er bl.a. URL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilganger konsument/representasjonsforhold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataobjekt som beskriver hvilke tilganger til ressurser en representant (leverandør) skal ha på vegne av konsument.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maskinporten</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maskinporten er en løsning for tilgangsstyring for virksomheter som utveksler data. Løsningen garanterer identiteten mellom virksomheter, og sørger for maskin-til-maskin autentisering</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OAUTH scopes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataobjekt som som kan beskrives som en ressurs-definisjon, og et token er som regel knyttet til ett eller flere scopes. Scopes benyttes til å styre tilganger til API-er og operasjoner, samt eventuelt hva slags responser man får fra API-er.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_utveksling_av_data_2"><a class="anchor" href="#_utveksling_av_data_2"></a><a class="link" href="#_utveksling_av_data_2">4.7.3. Utveksling av data</a></h4>
<div class="sect4">
<h5 id="_innhente_data_2"><a class="anchor" href="#_innhente_data_2"></a><a class="link" href="#_innhente_data_2">4.7.3.1. Innhente data</a></h5>
<div class="paragraph">
<p>Når en konsumet skal slå opp data gjennom et API benyttes Maskinporten for å få utstedt en sikkerhetsbillett som legges ved tjenestekallet til tilbyders API. Maskinporten utsteder sikkerhetsbilletter som OAUTH2-tokens.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Innhente data
image::architecture-repository:eOppslag-solution-no:SBB_Innhente.png[alt="Bilde mangler", width=750,link=https://nasjonal-arkitektur.github.io/nab_modeller_html-hovedbibliotek/e7e6c527-26f4-461c-b4dd-651fcbe85c8d/views/8d72be4b-7e31-438d-9990-c2c3f38f551e.html]</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 19. Elementer i view for Innhente data - løsningsmønster</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datakonsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som innhenter eller mottar data fra andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Innhente data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å innhente data fra en annen aktør.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slå opp data gjennom et API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med lå opp og hente data gjennom et API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Innhent samtykke ved behov</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å innhente samtykke fra person eller virksomhet som grunnlag for å innhente data. Dette gjøres kun ved behov.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hent teknisk endepunkt ved behov</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen å slå opp den tekniske adressen til et API før spørring mot API-et. Gjøres kun dersom det er nødvendig.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Be om tilgangstoken</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å benytte en sikkerhetsbillettjeneste for hente en sikkerhetsbillett som gir tilgang til et API. Dette forutsetter at alt er registert og satt opp riktig mot de aktuelle tjenestene.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utfør tjenestekall</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å benytte (gjøre et oppslag mot) et eksternt API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Samtykkeregistererings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å innhente samtykke fra den registrert som dataene gjelder. Dette kan være en person eller en virksomhet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adressetjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste som gir mulighet til å slå opp teknisk endepunkt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tokentjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste som utsteder sikkerhetsbilletter. Sikkerhetsbillett utstedes basert på tildelte rettigheter og eventuelle representasjonsforhold.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oppslag representasjonsforhold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste som benyttes av tokentjenesten for å kontrollere om det foreligger et delegert representasjonsforhold fra konsument til leverendør i autorisasjonstjenesten til Altinn.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datautvekslingstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for utveksling av data. Samme som data exchange service. Benyttes av avsender og mottaker for transport av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Endepunkt (adresse)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teknisk adresse til et API eller ressurs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virksomhetssertifikat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">En virksomhets elektroniske ID. Benyttes for å autentisere virksomheten overfor tokentjenesten.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilganger konsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oversikt over hvilke API og OAUTH-scopes en virksomhet (representert ved organisasjonsnummer) skal ha tilgang til (utstedt token for).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Altinn autorisasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autorisasjonskomponenten i Altinn som gir muligheter til å delegere rettigheter til andre organisasjoner eller personer. Rettigheter til bruk av autorisasjonskomponenten baserer seg på registrerte roller i Enhetsregisteret.
Altinn autorisasjon leverer også tjenester for å registrere og kontrollere samtykke gitt av person eller virksomhet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Felles API-katalog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Del av Felles datakatalog som gir mulighet for å søke etter API-er og lese API-spesifikasjoner <a href="https://fellesdatakatalog.brreg.no/apis" class="bare">https://fellesdatakatalog.brreg.no/apis</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maskinporten</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fellesløsning for API-sikring ved bruk av OAUTH2-tokens.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Altinn autorisasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autorisasjonskomponenten i Altinn som gir muligheter til å delegere rettigheter til andre organisasjoner eller personer. Rettigheter til bruk av autorisasjonskomponenten baserer seg på registrerte roller i Enhetsregisteret.
Altinn autorisasjon leverer også tjenester for å registrere og kontrollere samtykke gitt av person eller virksomhet.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_avgi_data_2"><a class="anchor" href="#_avgi_data_2"></a><a class="link" href="#_avgi_data_2">4.7.3.2. Avgi data</a></h5>
<div class="paragraph">
<p>Når tilbyder får en forspørsel om data som et API-kall og det ligger ved en sikkerhetsbillett benyttes valideringstjenesten til maskinporten for grov tilgangskontroll.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://nasjonal-arkitektur.github.io/nab_modeller_html-hovedbibliotek/e7e6c527-26f4-461c-b4dd-651fcbe85c8d/views/5a43e372-cf45-491f-a5e9-514d83e1e259.html"><img src="../eOppslag-solution-no/_images/SBB_Avgi.png" alt="Bilde mangler" width="650"></a>
</div>
<div class="title">Figur 25. Avgi data</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 20. Elementer i view for Avgi data - løsningsmønster</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatilbyder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyder av data til andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evne til å avgi data på forespørsel. Kan omfatte tilgangsstyring.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi forespurte data gjennom API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å avgi data på forespørsel gjennom et egnet API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta  forespørsel om oppslag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta forespørsler fra API-konsument om å avgi data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autentisere konsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å autentisere en kosnument.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kontroller tilgang</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kontroll og håndheving av konsumentens rettigheter til å få forespurte data.  I tillegg til "validering av sikkerhetsbillet", kan det være behov for kontroll mot virksomhetsinterne policies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å gi svar på forespørselen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datautvekslingstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for utveksling av data. Samme som data exchange service. Benyttes av avsender og mottaker for transport av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tokenvalideringstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste som benyttes av tilbyder for å validere og kontrollere autentisiteten til et OAUTH2 token fra Maskinporten</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilgangskontrolltjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å sjekke rettigheter til data. Kan være eksterne eller interne tjenester.
Eksempler på rettigheter kan komme av samtykker fra person eller virksomhet, eller rollebasert fra vergemål, familierelasjon el.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datautvekslingstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for utveksling av data. Samme som data exchange service. Benyttes av avsender og mottaker for transport av meldinger.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maskinporten</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maskinporten er en løsning for tilgangsstyring for virksomheter som utveksler data. Løsningen garanterer identiteten mellom virksomheter, og sørger for maskin-til-maskin autentisering</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Altinn autorisasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autorisasjonskomponenten i Altinn som gir muligheter til å delegere rettigheter til andre organisasjoner eller personer. Rettigheter til bruk av autorisasjonskomponenten baserer seg på registrerte roller i Enhetsregisteret.
Altinn autorisasjon leverer også tjenester for å registrere og kontrollere samtykke gitt av person eller virksomhet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Egen autorisasjonskomponent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Komponent for å håndheve virksomhetens regler for tilgang.
Også kalt policy enforcement point (PEP).</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_publisering_konsumering_enotifikasjon"><a class="anchor" href="#_publisering_konsumering_enotifikasjon"></a><a class="link" href="#_publisering_konsumering_enotifikasjon">4.7.4. Publisering-konsumering (eNotifikasjon)</a></h4>

</div>
</div>
<div class="sect2">
<h3 id="_om_publisering_og_konsumering_av_hendelsesstrømmer"><a class="anchor" href="#_om_publisering_og_konsumering_av_hendelsesstrømmer"></a><a class="link" href="#_om_publisering_og_konsumering_av_hendelsesstrømmer">4.8. Om publisering og konsumering av hendelsesstrømmer</a></h3>
<div id="basiskonsept-pub-sub" class="paragraph">
<p>Mønstre for publisering handler helt grunnleggende om at tilbydere publiserer data, uten nødvendigvis å vite om aktuelle konsumenter. Data kan i denne sammenhengen være f.eks. metadata som i Felles datakatalog, eller f.eks. data bak et API som publiseres åpent.</p>
</div>
<div class="paragraph">
<p>Et spesialtilfelle som omhandles med en egen referansearkitektur her, er publisering av hendelsesstrømmer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bruksområder_for_publisering_av_hendelsesstrømmer"><a class="anchor" href="#_bruksområder_for_publisering_av_hendelsesstrømmer"></a><a class="link" href="#_bruksområder_for_publisering_av_hendelsesstrømmer">4.9. Bruksområder for publisering av hendelsesstrømmer</a></h3>
<div class="paragraph">
<p>Eksempler på anvendelse av mønstre for publisering og konsumering av hendelsesstrømmer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Trigging av forretningsprosesser hos samhandlingsparter som deltar i dynamiske forretningsprosesser og tilpasset saksbehandling.</p>
</li>
<li>
<p>Replikering av data ved hendelsesbasert oppdatering av kopier og avledede datasett.</p>
</li>
<li>
<p>Logging av hendelsesrelaterte data for formål som arkivering og verifikasjon av etterlevelse.</p>
</li>
<li>
<p>Hendelsesbasert innhenting av data brukt til analyser og statistikk.</p>
</li>
<li>
<p>Strømming av IoT-data, enten periodisk (tidshendelse) eller ved terskeloverskridende endringer i måleverdier</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_konsepter_for_publisering_av_hendelsestrømmer"><a class="anchor" href="#_konsepter_for_publisering_av_hendelsestrømmer"></a><a class="link" href="#_konsepter_for_publisering_av_hendelsestrømmer">4.10. Konsepter for publisering av hendelsestrømmer</a></h3>
<div class="sect3">
<h4 id="_introduksjon_3"><a class="anchor" href="#_introduksjon_3"></a><a class="link" href="#_introduksjon_3">4.10.1. Introduksjon</a></h4>
<div id="basiskonsept-publisering2" class="paragraph">
<p>Mønstre for publisering handler helt grunnleggende om at tilbydere publiserer datastrømmer, eller hendelsesstrømmer, uten å måtte vite hvem konsumentene er. Konsumentene kan i sin tur koble seg på disse hendelsestrømmene og ta rede på hva som skjer.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Publisering%20av%20hendelser%20-%20basiskonsept.png" alt="Publisering av hendelser - basiskonsept image">
</div>
<div class="title">Figur 26. Publisering av hendelser - basiskonsept</div>
</div>
<div class="paragraph">
<p>Dette gir en form for løs kobling mellom aktørene som fremmer innovasjon og samhandling. Nye samhandlingsparter kan plukke opp hendelser og kople seg på i tjenesteproduksjonen. Forretningsprosessene behøver ikke være kartlagt og fastsatt i minste detalj på forhånd. Nye prosesser kan utvikles i dynamiske økosystemer. <em>Dette kan ses som et essensielt element i satsingen på sammenhengende tjenester og realisering av målsetninger om datadrevet økonomi og innovasjon; se f.eks.  <a href="https://www.regjeringen.no/no/tema/statlig-forvaltning/ikt-politikk/melding-om-datadrevet-okonomi-og-innovasjon/id2688376/">Stortingsmelding om datadrevet økonomi og innovasjon</a>.</em></p>
</div>
<div class="paragraph">
<p>Endringer i IT-systemene blir også enklere, fordi det vil være mindre avhengigheter til systemene hos andre virksomheter. En ønsker generelt å komme bort fra store monolittiske systemer som ikke er lagt opp til å samspille i en distribuert kontekst.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Info"></i>
</td>
<td class="content">
Løs kopling mellom IT-systemene er blant de de helt grunnleggende arkitekturprinsippene innen tjenesteorientert atrkitektur. Gjeldende arkitekturprinsipper fra Digitaliseringsdirektoratet per 2020 sier blant annet: <em>Ta hensyn til anerkjente designprinsipper for tjenesteorientert arkitektur, slik som løse koplinger, modularisering, standardiserte tjenestekontrakter med videre.</em>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Det fokuseres her på mønstre som understøtter hendelsesdrevet arkitektur og tjenesteorientering, og det benyttes et begrepsapparat som gjenspeiler dette. Mønstre for publisering handler derfor her i hovedsak om publisering av data om hendelser, samt strømming av slike data. Andre former for publisering, slik som f.eks. publisering av API-er i en API-katalog, faller utenfor her.</p>
</div>
<div class="paragraph">
<p>Det finnes flere varianter av mønstrene, og disse egner seg til ulike formål. Utvikling av arkitekturer og fellesløsninger pågår både i Norge og internasjonalt, blant annet med komponenter fra EU. Det finnes også en rekke teknologier og produkter, deriblant mye som <em>open source</em>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tips"></i>
</td>
<td class="content">
I artikkelen  <a href="https://martinfowler.com/articles/201701-event-driven.html">What do you mean by “Event-Driven”?</a> (fra 2017), redegjør  Martin Fowler kort for noen av de mest aktuelle mønstrene for strømming av hendelser. Han peker her også på behovet for god veiledning.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Dette er fremdeles for de fleste et vanskelig område å navigere i. Det finnes mange kilder til informasjon, men ingen enkelt, dekkende lærebok. Både vinkling og begrepsapparat fra ulike kilder er egnet til forvirring.</p>
</div>
<div class="paragraph">
<p>Ambisjonsnivået her er heller ikke  å gi en komplett innføring i alle aspekter. Beskrivelser og utvalg av mønstre vil være behovsdrevet og vil utvikles over tid.</p>
</div>
<div id="litteraturhenvisninger" class="sidebarblock">
<div class="content">
<div class="title">Noen litteraturhenvisninger</div>
<div class="paragraph">
<p>Det er skrevet mye om arkitekturmønstre for publisering, strømming og hendelsesdrevet arkitektur de siste årene, gjerne med ulike innfallsvinkler ut fra sammenhengen med arkitekturparadigmer som SOA og Microservices.</p>
</div>
<div class="paragraph">
<p>Noen utvalgte henvisninger:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://en.wikipedia.org/wiki/Event-driven_architecture">Wikipedia om Event-driven architecture</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Event-driven_SOA">Wikipedia om Event-driven SOA</a></p>
</li>
<li>
<p><a href="https://martinfowler.com/articles/201701-event-driven.html">Martin Fowler - What do you mean by “Event-Driven”?</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/w/index.php?title=Publish%E2%80%93subscribe_pattern&amp;oldid=950857039">Wikipedia om Publish-Subscribe</a></p>
</li>
<li>
<p><a href="https://doc.difi.no/nasjonal-arkitektur/kunnskap_/#event-collaboration">Event Collaboration</a></p>
</li>
<li>
<p><a href="https://www.sciencedirect.com/topics/computer-science/event-notification">Event Notification </a></p>
</li>
<li>
<p><a href="https://doc.difi.no/nasjonal-arkitektur/kunnskap_/#event-sourcing">Event Sourcing</a></p>
</li>
<li>
<p><a href="https://doc.difi.no/nasjonal-arkitektur/kunnskap_/#_pattern_cqrs_command_query_responsibility_segregation">CQRS</a></p>
</li>
<li>
<p><a href="https://mapr.com/blog/event-driven-microservices-patterns/">Event Driven Microservices Architecture Patterns and Examples</a></p>
</li>
<li>
<p><a href="https://www.confluent.io/blog/journey-to-event-driven-part-1-why-event-first-thinking-changes-everything/">Why Event-First Thinking Changes Everything</a></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="bruksområder-publisering-generelt"><a class="anchor" href="#bruksområder-publisering-generelt"></a><a class="link" href="#bruksområder-publisering-generelt">4.10.2. Bruksområder</a></h4>
<div class="paragraph">
<p>Eksempler på anvendelse av mønstre for publisering og konsumering av hendelsesstrømmer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Trigging av forretningsprosesser hos samhandlingsparter som deltar i dynamiske forretningsprosesser og tilpasset saksbehandling.</p>
</li>
<li>
<p>Replikering av data ved hendelsesbasert oppdatering av kopier og avledede datasett.</p>
</li>
<li>
<p>Logging av hendelsesrelaterte data for formål som arkivering og verifikasjon av etterlevelse.</p>
</li>
<li>
<p>Hendelsesbasert innhenting av data brukt til analyser og statistikk.</p>
</li>
<li>
<p>Strømming av IoT-data, enten periodisk (tidshendelse) eller ved terskeloverskridende endringer i måleverdier</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="overskrift-grunnleggende-publisering"><a class="anchor" href="#overskrift-grunnleggende-publisering"></a><a class="link" href="#overskrift-grunnleggende-publisering">4.10.3. Konsepter for publisering og konsumering av hendelsesstrømmer</a></h4>
<div class="sect4">
<h5 id="generisk-publisering"><a class="anchor" href="#generisk-publisering"></a><a class="link" href="#generisk-publisering">4.10.3.1. Basiskonsepter</a></h5>
<div class="sect5">
<h6 id="_aktørsamspill"><a class="anchor" href="#_aktørsamspill"></a><a class="link" href="#_aktørsamspill">4.10.3.1.1. Aktørsamspill</a></h6>
<div class="paragraph">
<p>Datatilbyder <span class="underline">publiserer</span> hendelsestrømmer som <span class="underline">konsumeres</span> av datakonsumenter. Tilsvarende kan en si at datatilbyders publiseringsløsning <span class="underline">skriver</span> notifikasjoner til hendelseslister etterhvert som hendelser skjer, etterfulgt av at datakonsumentene <span class="underline">leser</span> notifikasjoner gjennom sine løsninger for innhenting og mottak.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Publisering%20av%20hendelser%20-%20grunnleggende%20konsept,%20med%20applikasjoner.png" alt="Publisering av hendelser - grunnleggende konsept" width="med applikasjoner image">
</div>
<div class="title">Figur 27. Publisering av hendelser - grunnleggende konsept, med applikasjoner</div>
</div>
<div class="paragraph">
<p>Legg merke til at den publiserte hendelseslisten her er en del av tilbyders løsning og ansvar.</p>
</div>
<div class="paragraph">
<p>I praksis kan også både datatilbyder og datakonsument velge å benytte en ekstern tjenesteleverandør for å formidle hendelsesdata. I så fall kan ekstern tjenesteleverandørs løsninger og tjenester anses som del av tilbyders eller konsuments løsninger og tjenester på lik linje med interne leverandører (og behøver ikke vises som egen part).</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Advarsel"></i>
</td>
<td class="content">
Det faller utenfor omfanget her å gå inn på tilfeller der  ekstern tjenesteleverandør opptrer som  mellomledd på en måte som gjør det nødvendig å se på juridiske forhold eller løsninger på tvers av partene.
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="grunnleggende-begreper"><a class="anchor" href="#grunnleggende-begreper"></a><a class="link" href="#grunnleggende-begreper">4.10.3.1.2. Begrepsapparat</a></h6>
<div class="paragraph">
<p>Grunnleggende begreper og sammenhenger er vist i følgende modell.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Grunnleggende%20begreper%20for%20publisering%20av%20hendelser.png" alt="Grunnleggende begreper for publisering av hendelser image">
</div>
<div class="title">Figur 28. Grunnleggende begreper for publisering av hendelser</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Hendelser</em> er det som skjer i den virkelige i verden, i en konstant strøm av endrede data, eller <em>hendelsesstrømmer</em>.</p>
</li>
</ul>
</div>
<div id="subjekt-definisjon" class="ulist">
<ul>
<li>
<p><em>Subjekt</em> er hvem eller hva hendelsen omhandler, slik dette er å oppfatte i den aktuelle konteksten. Dette kan f.eks. være et fysisk objekt (eks. bil), en person, en virksomhet eller et konsept (eks. politikk). Det kan også være en samling av underordnede subjekter, slik som f.eks. en befolkningsgruppe eller alle virksomheter som har et navn som begynner på A.</p>
</li>
<li>
<p>Assosiert med hver hendelse finnes et <em>datagrunnlag</em> som tilsvarer tilstanden før hendelsen inntraff. I bakkant av hendelsen finnes tilsvarende  et <em>oppdatert datagrunnlag</em>.</p>
</li>
</ul>
</div>
<div id="definisjon-hendelsesrelaterte-data" class="ulist">
<ul>
<li>
<p>I tilknytning til hver hendelse finnes <em>Hendelsesrelaterte data</em>. Dette kan være små eller store datasett som beskriver datagrunnlaget og aktuelle endringer. Nærmere om begreper og tekniske løsninger for dette gis i tilknytning til de ulike arkitekturmønstrene, med ulike måter å representere og oppdatere datagrunnlaget på, på tvers av tilbyder og konsument.</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p>En <em>notifikasjon</em> informerer om at en hendelse har inntruffet og kan inneholde hele eller deler av det totale settet av aktuelle <em>hendelsesrelaterte data</em>, enten direkte eller gjennom lenke til hvor datasettet finnes (eventuelt en kombinasjon).</p>
</li>
<li>
<p>Notifikasjoner samles og publiseres av tilbyder gjennom  <em>hendelseslister</em>.</p>
</li>
<li>
<p>En og samme hendelse kan være representert gjennom flere notifikasjoner som hver beskriver hendelsen på ulike måter for ulike formål og ulike målgrupper; som publisert gjennom ulike hendelseslister.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="notifikasjonsinnhold-generisk"><a class="anchor" href="#notifikasjonsinnhold-generisk"></a><a class="link" href="#notifikasjonsinnhold-generisk">4.10.3.1.3. Innhold i notifikasjoner</a></h6>
<div class="paragraph">
<p>Begrepsapparatet bygger på <a href="#grunnleggende-begreper">det grunnleggende begrepsapparatet for publisering av hendelsesstrømmer</a>.</p>
</div>
<div class="paragraph">
<p>En modell som konkretiserer notifikasjonsinnholdet er vist i figuren nedenfor. Her er det også angitt relasjonene til hendelsesrelaterte data, noe som kan være et langt større datasett enn det som utveksles i notifikasjoner mellom tilbyder og konsument.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Notifikasjonsinnhold.png" alt="Notifikasjonsinnhold image">
</div>
<div class="title">Figur 29. Notifikasjonsinnhold</div>
</div>
<div class="paragraph">
<p>Forklaring til figuren over:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>En notifikasjon inneholder som minimum en <em>identifikator for notifikasjonen</em>. Denne må være gyldig på tvers av tilbyder og konsument. Tilbyder må holde rede på sammenhengen mellom notifikasjon og assosierte, <a href="#definisjon-hendelsesrelaterte-data">hendelsesrelaterte data</a>.</p>
</li>
<li>
<p>Hvilke notifikasjonsdata som forøvrig er relevante,  avhenger av hendelsestype og eventuell innholdsminimering.</p>
<div class="ulist">
<ul>
<li>
<p><em>Hendelsestype</em> identifiserer typen hendelse overfor konsument, som grunnlag  for filtrering og videre behandling.</p>
</li>
<li>
<p>Sekvensinformasjon kan gis ved å peke på foregående notifikasjon for samme subjekt. Tidsstempel med tilstrekkelig oppløsning kan også angi sekvens, men gir  ikke generelt en like direkte og treffsikker identifisering av foregående notifikasjon. <em>Merk: Løpende sekvensnummer er også mulig å benytte, men er ikke vist her.</em></p>
</li>
<li>
<p>Subjekt for hendelse: Se <a href="#subjekt-definisjon">definisjon av subjekt</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_innhenting_av_notifikasjoner_gjennom_spørring_mot_hendelseslister"><a class="anchor" href="#_innhenting_av_notifikasjoner_gjennom_spørring_mot_hendelseslister"></a><a class="link" href="#_innhenting_av_notifikasjoner_gjennom_spørring_mot_hendelseslister">4.10.3.1.4. Innhenting av notifikasjoner gjennom spørring mot hendelseslister</a></h6>
<div class="paragraph">
<p>Pullbasert innhenting av notifikasjoner skjer gjennom at konsumenten forespør notifikasjoner fra tilbyder, etterfulgt av at forespurte notifikasjoner leveres. Dette kan være en enkelt notifikasjon eller flere i rekke. Illustrasjon (sekvensdiagram):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Spørring%20mot%20hendelseslister%20-%20basisflyt.png" alt="Spørring mot hendelseslister - basisflyt image">
</div>
<div class="title">Figur 30. Spørring mot hendelseslister - basisflyt</div>
</div>
<div class="paragraph">
<p>Forespørsler gjøres mot tilbyders spørretjeneste, som vist i følgende diagram.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Tilbyders%20spørretjeneste%20mot%20hendelsesliste.png" alt="Tilbyders spørretjeneste mot hendelsesliste image">
</div>
<div class="title">Figur 31. Tilbyders spørretjeneste mot hendelsesliste</div>
</div>
<div class="paragraph">
<p>Tilbyders spørretjeneste  mot hendelseslister må støtte ulike måter å lese ut aktuelle hendelser på, slik som:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Spørringer for å hente ut filtrerte utvalg av notifikasjoner og, ved behov, minimere datainnhold i hver enkelt notifikasjon.</p>
</li>
<li>
<p>Avspilling av notifikasjoner innen angitt tidsrom.</p>
</li>
<li>
<p>Avspilling av seneste notifikasjoner, f.eks etter en gitt identifikator.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_innhenting_av_supplerende_hendelsesrelaterte_data"><a class="anchor" href="#_innhenting_av_supplerende_hendelsesrelaterte_data"></a><a class="link" href="#_innhenting_av_supplerende_hendelsesrelaterte_data">4.10.3.1.5. Innhenting av supplerende hendelsesrelaterte data</a></h6>
<div class="paragraph">
<p>For notifikasjoner som ikke gir et tilstrekkelig sett av <em>hendelsesrelaterte data</em> for konsumentens formål, må datakonsumenten selv ta initiativ til å innhente <em>supplerende hendelsesrelaterte data</em>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Det er uproblematisk å sende med en ny måleverdi for et termometer, mens det kan være mindre ønskelig å distribuere komplette kopier av større og distribuerte datasett. Hensyn til dataminimering (personvern eller andre hesnyn) spiller også en rolle i slike vurderinger.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Den typiske prosessen er illustrert i følgende sekvensdiagram:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Spørring%20mot%20hendelseslister%20-%20med%20innhenting%20av%20supplerende%20data.png" alt="Spørring mot hendelseslister - med innhenting av supplerende data image">
</div>
<div class="title">Figur 32. Spørring mot hendelseslister - med innhenting av supplerende data</div>
</div>
<div class="paragraph">
<p>I <em>forespørsel om supplerende hendelsesrelaterte data</em> må det kunne identifiseres hvilke data som ønskes. Tilbyder kan gi ulike opsjoner for dette. En mulighet er at <em>identifikator for notifikasjonen</em> entydig identifiserer aktuelle datasett. En annen mulighet er f.eks. spørring etter etter spesifikke informasjonselementer for et angitt subjekt.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tips"></i>
</td>
<td class="content">
Det bør sikres at <em>hendelsesrelaterte data</em> forblir identifiserbare og tilgjengelige over tid. En god måte å gjøre dette på er gjennom globalt unike identifikatorer i kombinasjon med en mekanisme for datavirtualisering.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Info"></i>
</td>
<td class="content">
Selve innhentingen av <em>supplerende hendelsesrelaterte data</em> dekkes av eOppslag referansearkitektur.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_avanserte_konsepter"><a class="anchor" href="#_avanserte_konsepter"></a><a class="link" href="#_avanserte_konsepter">4.10.3.2. Avanserte konsepter</a></h5>
<div class="sect5">
<h6 id="generisk-publish-subscribe"><a class="anchor" href="#generisk-publish-subscribe"></a><a class="link" href="#generisk-publish-subscribe">4.10.3.2.1. Abonnementsbasert publisering</a></h6>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Info"></i>
</td>
<td class="content">
Dette konseptet tilsvarer det som i litteraturen tradisjonelt omtales som <em>publish-subscribe</em>; se f.eks. <a href="https://en.wikipedia.org/w/index.php?title=Publish%E2%80%93subscribe_pattern&amp;oldid=950857039">wikipedia om publish-subscribe pattern</a> for en enkel beskrivelse av dette.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Her introduseres støtte for å tegne abonnementer for formål og behov som:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Støtte for strenge sanntidskrav. Unngå behov for å polle hendelseslistene for endringer og i stedet få abonnerte notifikasjoner levert fortløpende (pushbasert levering).</p>
</li>
<li>
<p>Velg mellom opsjoner for å få mottak av notifikasjoner til ønsket teknisk grensesnitt (f.eks. kall av API vs. levering til meldingkø).</p>
</li>
<li>
<p>SLA-avtaler, f.eks. avtale om akseptable tidsforsinkelser før levering av notifikasjoner.</p>
</li>
<li>
<p>Abonnementsbasert betaling. f.eks. ut fra valg mellom ulike, volumbaserte prispakker som tilbys, eller f.eks. volumuavhengig fastpris.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Følgende figur illustrerer det forretningsmessige koneptet for abonnement på hendelsesstrømmer.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Publisering%20av%20hendelser%20-%20basiskonsept%20med%20abonnement.png" alt="Publisering av hendelser - basiskonsept med abonnement image">
</div>
<div class="title">Figur 33. Publisering av hendelser - basiskonsept med abonnement</div>
</div>
<div class="paragraph">
<p>Registrering av abonnement gjøres typisk mot en selvbetjeningsløsning for dette hos datatilbyder. Datatilbyder vil deretter sende notifikasjoner fortløpende og pushbasert til konsumentens mottaksløsning som avtalt.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Pushbasert%20levering%20av%20notifikasjoner%20til%20abonnenter.png" alt="Pushbasert levering av notifikasjoner til abonnenter image">
</div>
<div class="title">Figur 34. Pushbasert levering av notifikasjoner til abonnenter</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Analogi til mediehus:</div>
<div class="ulist">
<ul>
<li>
<p>Mediehus (tilbyder) publiserer nyheter  (hendelser)  via  nyhetskanaler (hendelsesstrømmer) til et konsumentmarked der konsumentene ikke nødvendigvis er kjent på forhånd.</p>
</li>
<li>
<p>Konsumenter kan kople seg på for å lese nyheter på tilfeldig basis, f.eks. en løssalgsavis.</p>
</li>
<li>
<p>Konsumenter kan eventuelt tegne abonnementer for å få levert nyhetene "på døra" (f.eks. til en innboks).</p>
</li>
<li>
<p>Konsumenter kan også tegne abonnementer for å få et utvalg av nyhetene (innholdsfilter.)</p>
</li>
<li>
<p>Tilbyder kan ta betalt for innhold og tjenester, eller det kan være gratis.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="filtrering-og-minimering"><a class="anchor" href="#filtrering-og-minimering"></a><a class="link" href="#filtrering-og-minimering">4.10.3.2.2. Filtrering og minimering av hendelseslister og notifikasjoner</a></h6>
<div class="paragraph">
<p>Filtrering og minimering av hendelseslister og notifikasjoner handler om:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Filtrering av hendelseslister slik at en får det ønskede utvalget av subjekter og hendelser, f.eks. salg av leiligheter til under 2 millioner kroner i  din bydel. Dette handler ikke om å gjøre innhentingen stykkevis og delt. Det er normalt viktig å sørge for at den filtrerte hendelseslisten gir komplett historikk for formålet.</p>
</li>
<li>
<p>Minimering av innholdet i notifikasjoner, slik at konsumenten unngår å motta eller få tilgang til mer informasjon enn det som er interessant for konsumenten eller det has hjemmel for ut fra personvernhensyn.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Dette kan løses på ulike måter, herunder:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Tilbyder tilbyr ulike hendelseslister, der det i utgangspunktet er gjort et utvalg fra det komplette utvalget innen tilbyders domene, basert på metadata og kriterier som tema eller konfidensialitet for hver hendelsesliste.</p>
</li>
<li>
<p>Tilbyder filtrerer innen hver hendelsesliste ut fra konsumentens spesifikasjon /spørring.</p>
</li>
<li>
<p>Tilbyder minimerer innholdet i hver notifikasjon ut fra konsumentens spesifikasjon /spørring.</p>
</li>
<li>
<p>Konsumenten ignorerer irrelevante notifikasjoner ved å filtrere innlesingen på konsumentsiden eller forkaste notifikasjoner etter innlesing.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>På veien fra tilbyder til konsument vil hendelseslister og notifikasjoner på denne måten endre innhold. Det er de samme hendelsene som gjelder, men nye datasett. Det kan være nyttig å skille mellom tilbyders publiserte notifikasjoner, utvekslede notifikasjoner (tilpasset for konsument av tilbyder) og de notifikasjonene som er relevante for konsument og tas videre til  prosessering. En kan tilsvarende se på serier av f.eks. utvekslede notifikasjoner som en utvekslet hendelsesliste. Dette begrepsapparatet er oppsummert i følgende modell.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Filtrering%20og%20minimering%20av%20hendelseslister%20og%20notifikasjoner.png" alt="Filtrering og minimering av hendelseslister og notifikasjoner på tvers av tilbyder og konsument image">
</div>
<div class="title">Figur 35. Filtrering og minimering av hendelseslister og notifikasjoner på tvers av tilbyder og konsument</div>
</div>
</div>
<div class="sect5">
<h6 id="utledning-av-subjekttilstand"><a class="anchor" href="#utledning-av-subjekttilstand"></a><a class="link" href="#utledning-av-subjekttilstand">4.10.3.2.3. Tilstand som resultat av hendelser</a></h6>
<div class="paragraph">
<p>Et subjekts tilstand kan beskrives i form av et øyeblikksbilde eller som en serie endringer ut fra et tidligere øyeblikksbilde. En notifikasjon inneholder tilsvarende enten et øyeblikksbilde av subjektet eller data om hendelsen som beskriver en inkrementell endring.</p>
</div>
<div class="paragraph">
<p>Eksempel: Anta at termometeravlesninger rapporteres som daglige endringer siden forrige avlesning. For å finne dagens temperatur, må det være et kjent startpunkt (øyeblikksbilde).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tips"></i>
</td>
<td class="content">
En kan tenke på notifikasjoner  som transaksjoner i et regskap som gjøres opp med jevne mellomrom. Subjekttilstanden tilsvarer saldo, og ny saldo kan enkelt regnes ut ved å legge sammen alle transaksjonene siden forrige dokumenterte oppgjør. En kan også gå hele veien tilbake til oppstart, som i dette tilfellet uten videre er et kjent utgangspunkt (nullsaldo).
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_enotifikasjon"><a class="anchor" href="#_enotifikasjon"></a><a class="link" href="#_enotifikasjon">4.11. eNotifikasjon</a></h3>
<div class="sect3">
<h4 id="_om_dette_mønsteret_4"><a class="anchor" href="#_om_dette_mønsteret_4"></a><a class="link" href="#_om_dette_mønsteret_4">4.11.1. Om dette mønsteret</a></h4>
<div class="paragraph">
<p>eNotifikasjon er en referansearkitektur for utveksling av notifikasjoner som er innrettet på å støtte opp under "nyere" arkitekturmønstre for distribuerte applikasjoner, særlig aktuelt innen Microservices som arkitekturparadigme.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Info"></i>
</td>
<td class="content">
Et sentralt arkitekturmønster som støttes, er best kjent som <em>Event Sourcing</em>, blant annet karakterisert ved at tilstanden til et system eller et <em>subjekt</em> kan bestemmes ut fra en logg av hendelser. Se <a href="https://doc.difi.no/nasjonal-arkitektur/kunnskap_/#event-sourcing">litteratur om Event Sourcing</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Beskrivelsene her bygger på utvalgte deler av en separat oversikt over <a href="#overskrift-grunnleggende-publisering">konsepter for publisering og konsumering av hendelsesstrømmer</a>.</p>
</div>
<div class="paragraph">
<p>Grunnleggende egenskaper ved eNotifikasjon som mønster - en oppsummering av aktuelle konsepter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tilstanden til et <em>subjekt</em> kan bestemmes gjennom å prosessere en kronologisk sekvens av hendelser, ut fra et gitt øyeblikksbilde.</p>
</li>
<li>
<p>En hendelse kan representeres ved en eller flere  <em>notifikasjoner</em>.</p>
</li>
<li>
<p>Notifikasjoner samles i <em>hendelseslister</em>.</p>
</li>
<li>
<p>Hendelser er i seg selv uforanderlige (<em>immutable</em>). Tilsvarende gjelder for notifikasjoner i hendelseslister, dvs. at notifikasjoner i regelen ikke endres eller slettes fra hendelseslister.</p>
</li>
<li>
<p>Hver enkelt konsument kan lese samme notifikasjon flere ganger.</p>
</li>
<li>
<p>Hendelseslister kan traverseres og spørres mot.</p>
</li>
<li>
<p>En hendelsesliste tilsvarer en logg, og kan benyttes som en logg.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_verdistrømbeskrivelse"><a class="anchor" href="#_verdistrømbeskrivelse"></a><a class="link" href="#_verdistrømbeskrivelse">4.11.2. Verdistrømbeskrivelse</a></h4>
<div class="sect4">
<h5 id="_enotifikasjon_oversikt_over_verdistrømmer"><a class="anchor" href="#_enotifikasjon_oversikt_over_verdistrømmer"></a><a class="link" href="#_enotifikasjon_oversikt_over_verdistrømmer">4.11.2.1. eNotifikasjon - oversikt over verdistrømmer</a></h5>
<div class="paragraph">
<p>Følgende modell viser en oversikt over verdistrømmene på tvers av datatilbyder og datakonsument for eNotifikasjon. Dette er en spesialisering av den generiske verdistrømbeskrivelsen som finnes under <mark><a href="../nab_arkitekturlandskap_segmentarkitektur_datadeling_verdistrømmer/">Felles referansemodeller for datadeling</a>.</mark></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/eNotifikasjon%20-%20oversikt%20over%20verdistrømmer.png" alt="eNotifikasjon - oversikt over verdistrømmer image">
</div>
<div class="title">Figur 36. eNotifikasjon - oversikt over verdistrømmer</div>
</div>
<div class="paragraph">
<p>Disse verdistrømmene er nærmere beskrevet for hver rolle i påfølgende avsnitt.</p>
</div>
</div>
<div class="sect4">
<h5 id="_enotifikasjon_verdistrøm_for_datatilbyder"><a class="anchor" href="#_enotifikasjon_verdistrøm_for_datatilbyder"></a><a class="link" href="#_enotifikasjon_verdistrøm_for_datatilbyder">4.11.2.2. eNotifikasjon - verdistrøm for datatilbyder</a></h5>
<div class="paragraph">
<p>Her vises verdistrømmen for eNotifikasjon sett fra datatilbyder, med angivelse av kapabiliteter.</p>
</div>
<div class="paragraph">
<p>Det som er spesifikt for eNotifikasjon er vist med uthevet skrift, dvs. <em>Inngå avtaler om tilgang og levering av hendelsesstrømmer</em>, <em>Generere og tilby notifikasjoner</em>, samt <em>Avgi forespurte notifikasjoner</em>. Realiseringen av disse kapabilitetene beskrives i prosessmodeller m.v. for eNotifikasjon.</p>
</div>
<div class="paragraph">
<p>Øvrige kapabiliteter er beskrevet andre steder; se referansearkitektur for mønsteret eOppslag.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/eNotifikasjon%20-%20tilbyders%20verdistrøm.png" alt="eNotifikasjon - tilbyders verdistrøm image">
</div>
<div class="title">Figur 37. eNotifikasjon - tilbyders verdistrøm</div>
</div>
</div>
<div class="sect4">
<h5 id="_enotifikasjon_verdistrøm_for_datakonsumenter"><a class="anchor" href="#_enotifikasjon_verdistrøm_for_datakonsumenter"></a><a class="link" href="#_enotifikasjon_verdistrøm_for_datakonsumenter">4.11.2.3. eNotifikasjon - verdistrøm for datakonsumenter</a></h5>
<div class="paragraph">
<p>Her vises verdistrømmen for eNotifikasjon sett fra datakonsumenter, med angivelse av kapabiliteter.</p>
</div>
<div class="paragraph">
<p>Det som er spesifikt for eNotifikasjon er vist med uthevet skrift, dvs. <em>Inngå avtaler om tilgang og innhenting av hendelsesstrømmer</em> og <em>Innhente og håndtere notifikasjoner</em>. Realiseringen av disse kapabilitetene beskrives i prosessmodeller m.v. for eNotifikasjon.</p>
</div>
<div class="paragraph">
<p>Øvrige kapabiliteter er beskrevet andre steder; se referansearkitektur for mønsteret eOppslag.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/eNotifikasjon%20-%20konsumenters%20verdistrøm.png" alt="eNotifikasjon - konsumenters verdistrøm image">
</div>
<div class="title">Figur 38. eNotifikasjon - konsumenters verdistrøm</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kapabilitetskart_for_enotifikasjon"><a class="anchor" href="#_kapabilitetskart_for_enotifikasjon"></a><a class="link" href="#_kapabilitetskart_for_enotifikasjon">4.11.3. Kapabilitetskart for eNotifikasjon</a></h4>
<div class="paragraph">
<p>Modellen under gir en samlet oversikt over kapabiliteter som er spesifikke for eNotifikasjon, slik disse er identifisert i foregående verdistrømbeskrivelse.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Kapabiliteter%20eNotifikasjon.png" alt="Kapabiliteter eNotifikasjon image">
</div>
<div class="title">Figur 39. Kapabiliteter eNotifikasjon</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 21. Elementer i view for Kapabiliteter eNotifikasjon</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatilbyder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyder av data til andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datakonsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som innhenter eller mottar data fra andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Innhente og håndtere notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å konsumere hendelseslister ved å innhente notifikasjoner.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generere og tilby notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å dele informasjon om hendelser gjennom notifikasjoner som tilgjengeliggjøres for konsumenter gjennom hendelseslister.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtaler om tilgang og innhenting av hendelsesstrømmer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å inngå avtaler med datatilbyder om tilgang til hendelser gjennom hendelseslister med notifikasjoner.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtaler om tilgang og levering av hendelsesstrømmer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å inngå avtaler med datakonsumenter om tilgengjengeliggjøring av hendelseslister med notifikasjoner om hendelser.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi forespurte notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å avgi notifikasjoner på forespørsel</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_realisering_av_kapabiliteter_generisk_arkitekturmønster"><a class="anchor" href="#_realisering_av_kapabiliteter_generisk_arkitekturmønster"></a><a class="link" href="#_realisering_av_kapabiliteter_generisk_arkitekturmønster">4.11.4. Realisering av kapabiliteter - generisk arkitekturmønster</a></h4>
<div class="paragraph">
<p>Her beskrives realiseringen av de kapabilitetene som er spesifikke for eNotifikasjon i form av et generisk, løsningsuavhengig arkitekturmønster. Det vil kunne være flere måter å realisere aktuelle arkitekturbyggeklosser på.</p>
</div>
<div class="sect4">
<h5 id="_inngå_avtaler_om_tilgang_og_levering_av_hendelsesstrømmer"><a class="anchor" href="#_inngå_avtaler_om_tilgang_og_levering_av_hendelsesstrømmer"></a><a class="link" href="#_inngå_avtaler_om_tilgang_og_levering_av_hendelsesstrømmer">4.11.4.1. Inngå avtaler om tilgang og levering av hendelsesstrømmer</a></h5>
<div class="paragraph">
<p>Gi tilgang til notifikasjoner og hendelser er den prosessen datatilbyder må gjøre for å gi datakonsumenten tilgang til hendelseslister. Ved helt åpne hendelseslister kan prosessen være unødvendig og utgår, men vil normalt omfatte å tilgjengeliggjøre API som beskrevet i eOppslag. I tillegg kan det eventuelt registreres informasjon i tilknytning til filtrering og tilpasning av hendelselister ut fra konsumentens behov og tilganger.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Gi%20tilgang%20til%20notifikasjoner%20og%20hendelser.png" alt="Gi tilgang til notifikasjoner og hendelser image">
</div>
<div class="title">Figur 40. Gi tilgang til notifikasjoner og hendelser</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 22. Elementer i view for Gi tilgang til notifikasjoner og hendelser</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gi tilgang til notifikasjoner og hendelser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med oppsett for å gi tilgang til notifikasjoner og hendelser.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta forespørsel om tilgang til hendelsesstrømmer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å motta forespørsel om tilgang til notifikasjoner på hendelseslister.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtale om tilgang til hendelsesliste med notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å registrere seg som konsument av en hendelsesliste hos datatilbyder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatilbyder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyder av data til andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrering av konsument av hendelsesliste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registrere konsumenter av hendelseslite med notifikasjoner.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtaler om tilgang og levering av hendelsesstrømmer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å inngå avtaler med datakonsumenter om tilgengjengeliggjøring av hendelseslister med notifikasjoner om hendelser.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_inngå_avtaler_om_tilgang_og_innhenting_av_hendelsesstrømmer"><a class="anchor" href="#_inngå_avtaler_om_tilgang_og_innhenting_av_hendelsesstrømmer"></a><a class="link" href="#_inngå_avtaler_om_tilgang_og_innhenting_av_hendelsesstrømmer">4.11.4.2. Inngå avtaler om tilgang og innhenting av hendelsesstrømmer</a></h5>
<div class="paragraph">
<p>Få tilgang til notifikasjoner og hendelser er den prosessen datakonsument må gjøre for å sette opp og få tilganger til hendelseslister. Prosessetrinnene kommer i tillegg til prosessen for å få tigang til API som beskrevet i eOppslag.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Få%20tilgang%20til%20notifikasjoner%20og%20hendelser.png" alt="Få tilgang til notifikasjoner og hendelser image">
</div>
<div class="title">Figur 41. Få tilgang til notifikasjoner og hendelser</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 23. Elementer i view for Få tilgang til notifikasjoner og hendelser</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beskrive behov og tilganger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å beskrive hvilke tilganger konsument har rettigeheter til og hvilken type notifikasjoner som er aktuelle.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtale om tilgang til hendelsesliste med notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å registrere seg som konsument av en hendelsesliste hos datatilbyder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datakonsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som innhenter eller mottar data fra andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inngå avtaler om tilgang og innhenting av hendelsesstrømmer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å inngå avtaler med datatilbyder om tilgang til hendelser gjennom hendelseslister med notifikasjoner.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registrering av konsument av hendelsesliste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å registrere konsumenter av hendelseslite med notifikasjoner.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_generere_og_tilby_notifikasjoner"><a class="anchor" href="#_generere_og_tilby_notifikasjoner"></a><a class="link" href="#_generere_og_tilby_notifikasjoner">4.11.4.3. Generere og tilby notifikasjoner</a></h5>
<div class="paragraph">
<p>Generer og publiser notifikasjoner er den prosessen datatilbyder må gjøre for å tilby notifikasjoner gjennom hendelseslister. Hendelselister tilbys på tilsvarende måte som beskrevet for generelle mønstre for spørring og oppslag (herunder eOppslag), men det finnes spesielle krav for hendelseslister med tanke på segmentering,  filtrering og navigering.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Generer%20og%20publiser%20notifikasjoner.png" alt="Generer og publiser notifikasjoner image">
</div>
<div class="title">Figur 42. Generer og publiser notifikasjoner</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 24. Elementer i view for Generer og publiser notifikasjoner</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generere og publisere notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å generere notifikasjoner som data om hendelser, samt å publisere slike notifikasjoner i en eller flere hendelseslister, eventuelt tilpasset ulike målgrupper.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatilbyder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyder av data til andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generer og publiser notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å dele informasjon om hendelser.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generer notifikasjon ut fra hendelse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å generere en notifikasjon på bakgrunn av en hendelse.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Publiser notifikasjon i hendelseslister</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å legge notifikasjoner i en eller flere hendelseslister som er eksponert overfor aktuelle konsumenter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notifikasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">En notifikasjon informerer om at en hendelse har inntruffet og kan inneholde elle  peke til hele eller deler av det totale settet av aktuelle, hendelsesrelaterte data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hendelsesliste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liste med notifikasjoner tilgjengelig for konsumenter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generering av notifikasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste som genererer notifikasjoner basert på hendelser, der alle aktuelle grunnlagsdata er med eller lenket til.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skriving av notifikasjon til eksponerte hendelseslister</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å skrive en notifikasjon til en eller flere hendelseslister, eventuelt med filtrering av informasjon ut fra hvem som er aktuelle konsumenter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Komplett notifikasjon, tilbyders domene</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notifikasjon som inneholder eller lenker til et fullstendig sett av hendelsesrelaterte data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Publisert hendelsesliste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hendelsesliste som eksponeres for konsument. En tilbyder kan tilby flere hendelselister i parallell f.eks. med ulike temaer og for konsumenter med ulike rettigheter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Publisert notifikasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notifikasjon som publiseres på en eller flere hendelseslister. Publiserte notifikasjoner kan være "tykke" eller "tynne" med hensyn på hvor mye informasjon om en hendelse de inneholder.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_avgi_forespurte_notifikasjoner"><a class="anchor" href="#_avgi_forespurte_notifikasjoner"></a><a class="link" href="#_avgi_forespurte_notifikasjoner">4.11.4.4. Avgi forespurte notifikasjoner</a></h5>
<div class="paragraph">
<p>Notifikasjoner avgis gjennom API på tilsvarende måte som beskrevet for generelle mønstre for spørring og oppslag, men tilbyder må, ved behov, tilpasse hendelsene som avgis etter det konsumenten har rettigheter til og etterspør. F.eks. kan konsumenten kun ha rettigheter til en delmengde av alle hendelser i hendelsesliten og også kun være interessert i enkelte typer hendelser. Konsumenten vil også normalt kun ha behov for å hente notifikasjoner som ikke er hentet tidliger, men kan også ønske å hente tidligere notifikasjoner på nytt.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Avgi%20forespurte%20notifikasjoner.png" alt="Avgi forespurte notifikasjoner image">
</div>
<div class="title">Figur 43. Avgi forespurte notifikasjoner</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 25. Elementer i view for Avgi forespurte notifikasjoner</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyders spørretjeneste mot hendelsesliste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for spørring og navigering av hendelsesliste gjennom API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi forespurte data gjennom API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å avgi data på forespørsel gjennom et egnet API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi forespurte notifikasjoner gjennom API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å avgi notifikasjoner på forespørsel gjennom et API som</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta forespørsel om notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Motta forespørsler fra konsument om å avgi notifikasjoner.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi utvalgte notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi utvalgte hendelser basert på parametere i forespørsel om notifikasjoner.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilpass innhold til konsument (dersom aktuelt)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å tilpasse innholdet til konsument. Tilpasningen gjøres på grunnlag av parametere/informasjon i forespørselen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autentiser konsument og kontroller tilgang</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å autentisere en konsument og kontrollere  rettigheter til data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatilbyder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyder av data til andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forespørsel om notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataobjekt med eventuelle parametere for spørring på notifikasjoner fra tilgjengelig hendelsesliste. Kan inneholde referanse til hvor i hendelselisten (f.eks. tid eller sekvensnummer) man ønsker å lese, avgrensning til temaer, rettigheter og liknende.
Informasjonen er grunnlag for eventuell tilpasning av innhold og utvalg.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyders filtrerings- og minimeringstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å filtrere og minimere informasjon ut fra parametere i forespørselen og hvilken informasjon konsumenten har rettigheter til.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autentiseringstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste som benyttes av tilbyder for å autentisere aktuell konsument.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilgangskontroll-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å sjekke rettigheter til data. Kan være eksterne eller interne tjenester.
Eksempler på rettigheter kan komme av samtykker fra person eller virksomhet, eller rollebasert fra vergemål, familierelasjon el.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Avgi forespurte notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å avgi notifikasjoner på forespørsel</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utvekslet hendelsesliste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hendelsesliste som utveksles,  filtrert ut fra konsumentens spesifikasjoner.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Publisert hendelsesliste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hendelsesliste som eksponeres for konsument. En tilbyder kan tilby flere hendelselister i parallell f.eks. med ulike temaer og for konsumenter med ulike rettigheter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Publisert notifikasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notifikasjon som publiseres på en eller flere hendelseslister. Publiserte notifikasjoner kan være "tykke" eller "tynne" med hensyn på hvor mye informasjon om en hendelse de inneholder.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utvekslet notifikasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notifikasjon  som utveksles,  eventuelt minimert ut fra konsumentens spesifikasjoner.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_innhente_og_håndtere_notifikasjoner"><a class="anchor" href="#_innhente_og_håndtere_notifikasjoner"></a><a class="link" href="#_innhente_og_håndtere_notifikasjoner">4.11.4.5. Innhente og håndtere notifikasjoner</a></h5>
<div class="paragraph">
<p>Notifikasjoner leses på tilsvarende måte som beskrevet for generelle mønstre for spørring og oppslag (herunder eOppslag), men konsumentene må holde orden på spesielle forhold som rekkefølge og hvilke notifikasjoner som er lest. Konsumenten må også være i stand til å vurdere relevansen av hendelsene før videre behandling av notifikasjonene.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../event-streaming/_images/Konsumer%20notifikasjoner.png" alt="Konsumer notifikasjoner image">
</div>
<div class="title">Figur 44. Konsumer notifikasjoner</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Tabell 26. Elementer i view for Konsumer notifikasjoner</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Innhente og håndtere notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evnen til å konsumere hendelseslister ved å innhente notifikasjoner.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datakonsument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Den som innhenter eller mottar data fra andre aktører.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Konsumer notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosessen med å lese og håndtere notifikasjoner.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forespør og motta notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess for å hente inn en eller flere notifikasjoner fra en hendelsesliste.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vurder relevans av notifikasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess med å vurdere om en hendelsen knyttet til lest notifikasjon er relevant for konsumenten.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forkast notifikasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess med å forkaste notifikasjon som ikke er relevant for virksomheten. Avhengig av krav til personvern og informasjonssikkerhet kan det være særskilte krav til hva som er lov å beholde.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Videre behandling av notifikasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prosess med videre behandling av en notifikasjon som normalt vil være å innhente mer informasjon om hendelsen eller subjektet notifikasjonen er knyttet til og eventuelt agere ut i fra denne.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forespørsel om notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dataobjekt med eventuelle parametere for spørring på notifikasjoner fra tilgjengelig hendelsesliste. Kan inneholde referanse til hvor i hendelselisten (f.eks. tid eller sekvensnummer) man ønsker å lese, avgrensning til temaer, rettigheter og liknende.
Informasjonen er grunnlag for eventuell tilpasning av innhold og utvalg.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kriterier og regler for å vurdere relevans av notifikasjoner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Informasjon om hva som legges til grunn for å vurdere relevansen av en hendelse, basert på informasjon i lest notifikasjon.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notifikasjon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">En notifikasjon informerer om at en hendelse har inntruffet og kan inneholde elle  peke til hele eller deler av det totale settet av aktuelle, hendelsesrelaterte data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Konsuments filtrerings- og minimeringstjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for å filtrere innhentede notifikasjoner. Dette er en tilleggsmekanisme for filtrering og minimering, sammenliknet med det som gjøres gjennom spørringer mot datatilbyder, og benyttes ved behov. Filtreringen kan gjøres ved å filtrere selve innlesing eller ved å filtrere mottatte notifikasjoner etter innlesing. Etter innlesing kan det også gjøres minimering av innholdet i notifikasjonen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datautvekslings-tjeneste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for utveksling av data over aktuell transportprotokoll, f.eks, gjennom asynkrone medlinger eller synkrone API-oppslag.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilbyders spørretjeneste mot hendelsesliste</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tjeneste for spørring og navigering av hendelsesliste gjennom API.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_løsningsmønstre_for_enotifikasjon"><a class="anchor" href="#_løsningsmønstre_for_enotifikasjon"></a><a class="link" href="#_løsningsmønstre_for_enotifikasjon">4.11.5. Løsningsmønstre for eNotifikasjon</a></h4>
<div class="paragraph">
<p>Spesifikke løsningsmønstre for eNotifikasjon er inntil videre ikke utarbeidet. Det er stor variasjon i praksis, og ingen fellesløsninger er så langt etablert i Norge.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tips"></i>
</td>
<td class="content">
Mer om fellesløsninger, standarder og løsningsmønstre vil følge her etterhvert.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Det finnes i mellomtiden noen gode eksempler å peke på.</p>
</div>
<div class="paragraph">
<p>Her nevnes spesielt:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modernisert folkeregister fra Skatteetaten tilbyr hendelseslister og oppslag som konsumenttjenester. Disse tjenestene er beskrevet i <a href="https://skatteetaten.github.io/folkeregisteret-api-dokumentasjon/konsumenttjenester/">Folkeregisterets API dokumentasjon</a>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>Kontakt: nasjonalarkitektur@digdir.no, eventuelt erik.hagen@digdir.no, tlf. +47 90631013.</p>
  <p>Digitaliseringsirektoratet, 2020.</p>
</footer><script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
