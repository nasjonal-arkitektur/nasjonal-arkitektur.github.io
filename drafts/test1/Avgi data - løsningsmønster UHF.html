<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Avgi data - løsningsmønster UHF :: Nasjonalt arkitekturverksted</title>
    <link rel="canonical" href="https://digdir.gitlab.io/site/drafts/test1/Avgi%20data%20-%20løsningsmønster%20UHF.html">
    <meta name="generator" content="Antora 2.3.3">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://digdir.gitlab.io/site">Nasjonalt arkitekturverksted</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
 		<a id="twitter-link" class="navbar-item" href="https://twitter.com/janakaSteph" target="_blank">
          <i class="fab fa-twitter"></i>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="drafts" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Utkast og innspill</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../about-drafts.html">Om utkast og innspill</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Innspill til referansearkitekturer</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ra-integrated-processes/ra-integrated-processes-proposal.html">Referansearkitektur for samhandlingsprosesser (forslag)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ra-iam/ra-iam-proposal.html">Referansearkitektur for informasjonssikkerhet, tillit og personvern (forslag)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Målbilde for nasjonal samhandlingsinfrastruktur (forslag)</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Referansearkitektur for tillitstjenester</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Referansearkitektur for datadeling</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Referansearkitektur for samhandlingsprosesser</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Referansearkitektur for integrasjon med EU-s Single Digital Gateway</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Referansearkitektur for IOT</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Referansearkitektur for API management</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Referansearkitektur for fagsystemer</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Referansearkitektur for saksbehandling i kommuner</span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">UNIT-test</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Informasjonsforvaltningsdomener.html">Informasjonsforvaltningsdomener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Applikasjonsoversikt%20forsepørsel%20integrert%20med%20IAM.html">Applikasjonsoversikt forsepørsel integrert med IAM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Applikasjonsoversikt%20forsepørsel%20integrert%20nasjonalt.html">Applikasjonsoversikt forsepørsel integrert nasjonalt</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Applikasjonsoversikt%20forsepørsel.html">Applikasjonsoversikt forsepørsel</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="Avgi%20data%20-%20løsningsmønster%20UHF.html">Avgi data - løsningsmønster UHF</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Dataobjekter%20eOppslag%20-%20med%20metadata%20UHF.html">Dataobjekter eOppslag - med metadata UHF</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Dataobjekter%20eOppslag%20UHF.html">Dataobjekter eOppslag UHF</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Delegere%20rettigheter%20til%20databehandler%20-%20løsningsmønster%20UHF.html">Delegere rettigheter til databehandler - løsningsmønster UHF</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Få%20tilgang%20til%20data%20-%20løsningsmønster%20UHF.html">Få tilgang til data - løsningsmønster UHF</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Innhente%20data%20-%20løsningsmønster%20UHF.html">Innhente data - løsningsmønster UHF</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Registrere%20API%20%20UHF.html">Registrere API  UHF</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Tilgjengeliggjøre%20data%20etter%20forspørsel%20løsningsmønster%20UHF.html">Tilgjengeliggjøre data etter forspørsel løsningsmønster UHF</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Se også</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture-repository/index.html">Nasjonalt arkitekturverksted</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../knowledge/index.html">Arkitekturfaglig kunnskapsverksted</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Utkast og innspill</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Arkitekturfaglig kunnskapsverksted</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../knowledge/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Nasjonalt arkitekturverksted</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../architecture-repository/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Utkast og innspill</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../architecture-repository/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Utkast og innspill</a></li>
    <li>UNIT-test</li>
    <li><a href="Avgi%20data%20-%20løsningsmønster%20UHF.html">Avgi data - løsningsmønster UHF</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///C:/gitlab/digdir/components/drafts/unit/modules/test1/pages/Avgi%20data%20-%20løsningsmønster%20UHF.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Avgi data - løsningsmønster UHF</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_generelt">1. Generelt</a></li>
<li><a href="#_egen_autorisasjons_komponent">2. Egen autorisasjons-komponent</a></li>
<li><a href="#_maskinporten">3. Maskinporten</a></li>
<li><a href="#_altinn_autorisasjon">4. Altinn autorisasjon</a></li>
<li><a href="#_datatilbyder">5. Datatilbyder</a></li>
<li><a href="#_tilgangskontroll_tjeneste">6. Tilgangskontroll-tjeneste</a></li>
<li><a href="#_avgi_forespurte_data_gjennom_api">7. Avgi forespurte data gjennom API</a>
<ul class="sectlevel2">
<li><a href="#_motta_forespørsel_om_oppslag">7.1. Motta  forespørsel om oppslag</a></li>
<li><a href="#_avgi_data">7.2. Avgi data</a></li>
<li><a href="#_autentisere_konsument">7.3. Autentisere konsument</a></li>
<li><a href="#_kontroller_tilgang">7.4. Kontroller tilgang</a></li>
</ul>
</li>
<li><a href="#_datautvekslings_tjeneste">8. Datautvekslings-tjeneste</a></li>
<li><a href="#_datautvekslings_tjeneste_2">9. Datautvekslings-tjeneste</a></li>
<li><a href="#_tokenvaliderings_tjeneste">10. Tokenvaliderings-tjeneste</a></li>
<li><a href="#_avgi_data_2">11. Avgi data</a></li>
<li><a href="#_uhf_oauth2_autorisasjonstjener">12. UHF Oauth2 autorisasjonstjener</a></li>
<li><a href="#_api_gateway_hos_dataeier_oauth_resource_server">13. API Gateway hos dataeier / OAuth resource server</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_generelt"><a class="anchor" href="#_generelt"></a>1. Generelt</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tjeneste som benyttes av tilbyder for å validere og kontrollere autentisiteten til et OAUTH2 token fra Maskinporten.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Avgi%20data%20-%20løsningsmønster%20UHF.png" alt="Avgi data - løsningsmønster UHF image">
</div>
<div class="title">Figure 1. Avgi data - løsningsmønster UHF</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_egen_autorisasjons_komponent"><a class="anchor" href="#_egen_autorisasjons_komponent"></a>2. Egen autorisasjons-komponent</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Komponent for å håndheve virksomhetens regler for tilgang.
Også kalt policy enforcement point (PEP).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maskinporten"><a class="anchor" href="#_maskinporten"></a>3. Maskinporten</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Maskinporten sørger for sikker autentisering og tilgangskontroll for datautveksling mellom
virksomheter, maskin til maskin. Dette gir teknisk og organisatorisk samhandlingsevne.</p>
</div>
<div class="paragraph">
<p>Mer om Maskinporten:
<a href="https://www.digdir.no/digitale-felleslosninger/maskinporten/869" class="bare">https://www.digdir.no/digitale-felleslosninger/maskinporten/869</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_altinn_autorisasjon"><a class="anchor" href="#_altinn_autorisasjon"></a>4. Altinn autorisasjon</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Altinn autorisasjon gir teknisk samhandlingsevne ved at bruker logger inn med elektronisk ID,
autorisasjonskomponenten sjekker at bruker har de tilgangene som kreves for å ta i bruk aktuell tjeneste.</p>
</div>
<div class="paragraph">
<p>Dersom en privatperson skal ta i bruk en tjeneste på vegne av en virksomhet, gjøres det et oppslag mot Enhetsregisteret for å bekrefte at personen har en rolle på vegne av virksomheten. Dette gir organisatorisk samhandlingsevne.</p>
</div>
<div class="paragraph">
<p>Mer om Altinn autorisasjon:
<a href="https://www.altinndigital.no/produkter/styring-av-tilgang/" class="bare">https://www.altinndigital.no/produkter/styring-av-tilgang/</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_datatilbyder"><a class="anchor" href="#_datatilbyder"></a>5. Datatilbyder</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tilbyder av data til andre aktører.</p>
</div>
<div class="paragraph">
<p>API Eiere  (kan eie Data som API gir tilgang til, eller system som tilbyr APIet)??</p>
</div>
<div class="paragraph">
<p>Når virksomheten tilbyr åpne data, vil det være virksomheten som eier dataene. (men det bør vel definere et domen-eier innenfor virksomheten)</p>
</div>
<div class="paragraph">
<p>Data eier på to nivå: f. eks. studieavdelingen (er ikke dette behandlingsansvarlig?) spør studenten om de gir samtykke til å gi tilgang til data om studenten som hen eier.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tilgangskontroll_tjeneste"><a class="anchor" href="#_tilgangskontroll_tjeneste"></a>6. Tilgangskontroll-tjeneste</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tjeneste for å sjekke rettigheter til data. Kan være eksterne eller interne tjenester.
Eksempler på rettigheter kan komme av samtykker fra person eller virksomhet, eller rollebasert fra vergemål, familierelasjon el.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_avgi_forespurte_data_gjennom_api"><a class="anchor" href="#_avgi_forespurte_data_gjennom_api"></a>7. Avgi forespurte data gjennom API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Prosessen med å avgi data på forespørsel gjennom et egnet API.</p>
</div>
<div class="sect2">
<h3 id="_motta_forespørsel_om_oppslag"><a class="anchor" href="#_motta_forespørsel_om_oppslag"></a>7.1. Motta  forespørsel om oppslag</h3>
<div class="paragraph">
<p>Motta forespørsler fra API-konsument om å avgi data.</p>
</div>
</div>
<div class="sect2">
<h3 id="_avgi_data"><a class="anchor" href="#_avgi_data"></a>7.2. Avgi data</h3>
<div class="paragraph">
<p>Prosessen med å gi svar på forespørselen.</p>
</div>
</div>
<div class="sect2">
<h3 id="_autentisere_konsument"><a class="anchor" href="#_autentisere_konsument"></a>7.3. Autentisere konsument</h3>
<div class="paragraph">
<p>Prosessen med å autentisere en konsument.</p>
</div>
</div>
<div class="sect2">
<h3 id="_kontroller_tilgang"><a class="anchor" href="#_kontroller_tilgang"></a>7.4. Kontroller tilgang</h3>
<div class="paragraph">
<p>Kontroll og håndheving av konsumentens rettigheter til å få forespurte data.  I tillegg til "validering av sikkerhetsbillet", kan det være behov for kontroll mot virksomhetsinterne policies.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_datautvekslings_tjeneste"><a class="anchor" href="#_datautvekslings_tjeneste"></a>8. Datautvekslings-tjeneste</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tjeneste for utveksling av data over aktuell transportprotokoll, f.eks, gjennom asynkrone medlinger eller synkrone API-oppslag.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_datautvekslings_tjeneste_2"><a class="anchor" href="#_datautvekslings_tjeneste_2"></a>9. Datautvekslings-tjeneste</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tjeneste for utveksling av data over aktuell transportprotokoll, f.eks, gjennom asynkrone medlinger eller synkrone API-oppslag.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tokenvaliderings_tjeneste"><a class="anchor" href="#_tokenvaliderings_tjeneste"></a>10. Tokenvaliderings-tjeneste</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tjeneste som benyttes av tilbyder for å validere og kontrollere autentisiteten til et OAUTH2 token fra Maskinporten</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_avgi_data_2"><a class="anchor" href="#_avgi_data_2"></a>11. Avgi data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Evne til å avgi data på forespørsel. Kan omfatte tilgangsstyring.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_uhf_oauth2_autorisasjonstjener"><a class="anchor" href="#_uhf_oauth2_autorisasjonstjener"></a>12. UHF Oauth2 autorisasjonstjener</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Autorisasjonstjeneter realiserer tilgangskontroll gjennom å utstede OpenID Connect eller OAuth 2 grants og tokens. En autorisasjonstjener er også brukt til å realisere tilgangs policy.</p>
</div>
<div class="paragraph">
<p>Scope (rettighet) og Audience (identifikator eller ressurs-server f. eks. FS)</p>
</div>
<div class="paragraph">
<p>Per i dag er Scopes er grovkornet
Rich authorization requsts (ny spesifikasjon) for å utvide scope begrep i IETF
underenhet og behandlingssted, behandlingsgrunnlag og roller jobbes det med.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api_gateway_hos_dataeier_oauth_resource_server"><a class="anchor" href="#_api_gateway_hos_dataeier_oauth_resource_server"></a>13. API Gateway hos dataeier / OAuth resource server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Komponent som beskytter ressursene og monitorerer tilgang inklusivt:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Validere tilgangstoken</p>
</li>
<li>
<p>Beskytte mot inntrenging og andre trusler</p>
<div class="ulist">
<ul>
<li>
<p>Håndtere volumbegrensninger og andre abonnementsordninger</p>
</li>
<li>
<p>Håndheve tilgangsstyring</p>
</li>
<li>
<p>Samle inn data om bruken av API-er</p>
</li>
<li>
<p>[orkestrering mellom interntjeneser??]</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Prinsipp fra Steiner:
Oppgaver både sikkerhetsperspektiv og forvaltningsperspektivet
Dersom gatway skal stå for sikkerheten, MÅ VÆRE SIKKER PÅ at API ikke kan nås utenom gateway
Noen må passe VELDIG godt på gatewayen og holder den oppdatert.</p>
</div>
<div class="paragraph">
<p>Det må være et tydeligvalg om hvem (gateway eller API) har ansvar for sikkerhetsmessig.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>Kontakt: nasjonalarkitektur@digdir.no</p>
</footer><script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
